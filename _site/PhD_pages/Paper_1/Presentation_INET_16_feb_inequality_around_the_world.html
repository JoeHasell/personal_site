<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="    Joe Hasell – DPhil candidate at DSPI University of Oxford; Our World in Data    Pablo Arriagada – Our World in Data">

<title>Joe Hasell - Triangulating a global view on inequality</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        if (typeof require !== 'undefined') {
        require.undef("plotly");
        requirejs.config({
            paths: {
                'plotly': ['https://cdn.plot.ly/plotly-2.6.3.min']
            }
        });
        require(['plotly'], function(Plotly) {
            window._Plotly = Plotly;
        });
        }
        </script>
        

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Triangulating a global view on inequality</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Joe Hasell</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">DPhil: Triangulating the key facts about global income distribution</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../PhD_pages/overview.html" class="sidebar-item-text sidebar-link">Overview of papers</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">Paper 1: A global view on inequality within countries</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../PhD_pages/Paper_1/paper1.html" class="sidebar-item-text sidebar-link">Paper 1: Triangulating trends in inequality around the world from secondary databases</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../presentations.html" class="sidebar-item-text sidebar-link">Presentations</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">About this site</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../how_to.html" class="sidebar-item-text sidebar-link">How I built this site</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#concepts" id="toc-concepts" class="nav-link active" data-scroll-target="#concepts">Concepts</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a>
  <ul class="collapse">
  <li><a href="#why-do-we-need-a-global-view" id="toc-why-do-we-need-a-global-view" class="nav-link" data-scroll-target="#why-do-we-need-a-global-view">Why do we need a global view?</a></li>
  </ul></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a>
  <ul class="collapse">
  <li><a href="#a-clear-global-view-is-lacking" id="toc-a-clear-global-view-is-lacking" class="nav-link" data-scroll-target="#a-clear-global-view-is-lacking">A clear global view is lacking</a></li>
  </ul></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-world-inequality-database" id="toc-different-worlds-world-inequality-database" class="nav-link" data-scroll-target="#different-worlds-world-inequality-database">Different ‘worlds’: <em>World Inequality Database</em></a></li>
  </ul></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-world-inequality-database-1" id="toc-different-worlds-world-inequality-database-1" class="nav-link" data-scroll-target="#different-worlds-world-inequality-database-1">Different ‘worlds’: <em>World Inequality Database</em></a></li>
  </ul></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-world-bank-poverty-and-inequality-platform" id="toc-different-worlds-world-bank-poverty-and-inequality-platform" class="nav-link" data-scroll-target="#different-worlds-world-bank-poverty-and-inequality-platform">Different ‘worlds’: <em>World Bank, Poverty and Inequality Platform</em></a></li>
  </ul></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-world-bank-poverty-and-inequality-platform-1" id="toc-different-worlds-world-bank-poverty-and-inequality-platform-1" class="nav-link" data-scroll-target="#different-worlds-world-bank-poverty-and-inequality-platform-1">Different ‘worlds’: <em>World Bank, Poverty and Inequality Platform</em></a></li>
  </ul></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"></a>
  <ul class="collapse">
  <li><a href="#different-worlds" id="toc-different-worlds" class="nav-link" data-scroll-target="#different-worlds">Different ‘worlds’</a></li>
  </ul></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"></a>
  <ul class="collapse">
  <li><a href="#different-methodologies" id="toc-different-methodologies" class="nav-link" data-scroll-target="#different-methodologies">Different methodologies</a></li>
  </ul></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"></a>
  <ul class="collapse">
  <li><a href="#different-methodologies-1" id="toc-different-methodologies-1" class="nav-link" data-scroll-target="#different-methodologies-1">Different methodologies</a></li>
  </ul></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"></a></li>
  <li><a href="#section-10" id="toc-section-10" class="nav-link" data-scroll-target="#section-10"></a></li>
  <li><a href="#connecting-up-the-worlds" id="toc-connecting-up-the-worlds" class="nav-link" data-scroll-target="#connecting-up-the-worlds">Connecting up the ‘worlds’</a>
  <ul class="collapse">
  <li><a href="#section-11" id="toc-section-11" class="nav-link" data-scroll-target="#section-11"></a>
  <ul class="collapse">
  <li><a href="#connecting-up-the-worlds-1" id="toc-connecting-up-the-worlds-1" class="nav-link" data-scroll-target="#connecting-up-the-worlds-1">Connecting up the ‘worlds’</a></li>
  </ul></li>
  <li><a href="#section-12" id="toc-section-12" class="nav-link" data-scroll-target="#section-12"></a>
  <ul class="collapse">
  <li><a href="#connecting-up-the-worlds-2" id="toc-connecting-up-the-worlds-2" class="nav-link" data-scroll-target="#connecting-up-the-worlds-2">Connecting up the ‘worlds’</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#coverage" id="toc-coverage" class="nav-link" data-scroll-target="#coverage">Coverage</a>
  <ul class="collapse">
  <li><a href="#section-13" id="toc-section-13" class="nav-link" data-scroll-target="#section-13"></a></li>
  <li><a href="#section-14" id="toc-section-14" class="nav-link" data-scroll-target="#section-14"></a></li>
  <li><a href="#section-15" id="toc-section-15" class="nav-link" data-scroll-target="#section-15"></a></li>
  <li><a href="#section-16" id="toc-section-16" class="nav-link" data-scroll-target="#section-16"></a></li>
  </ul></li>
  <li><a href="#vs-2015" id="toc-vs-2015" class="nav-link" data-scroll-target="#vs-2015">1995 vs 2015</a>
  <ul class="collapse">
  <li><a href="#section-17" id="toc-section-17" class="nav-link" data-scroll-target="#section-17"></a></li>
  <li><a href="#section-18" id="toc-section-18" class="nav-link" data-scroll-target="#section-18"></a></li>
  <li><a href="#section-19" id="toc-section-19" class="nav-link" data-scroll-target="#section-19"></a></li>
  <li><a href="#section-20" id="toc-section-20" class="nav-link" data-scroll-target="#section-20"></a></li>
  <li><a href="#section-21" id="toc-section-21" class="nav-link" data-scroll-target="#section-21"></a></li>
  <li><a href="#section-22" id="toc-section-22" class="nav-link" data-scroll-target="#section-22"></a></li>
  <li><a href="#section-23" id="toc-section-23" class="nav-link" data-scroll-target="#section-23"></a></li>
  <li><a href="#top-1-vs-top-10" id="toc-top-1-vs-top-10" class="nav-link" data-scroll-target="#top-1-vs-top-10">Top 1 vs Top 10?</a></li>
  <li><a href="#section-24" id="toc-section-24" class="nav-link" data-scroll-target="#section-24"></a></li>
  </ul></li>
  <li><a href="#vs-2018" id="toc-vs-2018" class="nav-link" data-scroll-target="#vs-2018">1980 vs 2018</a>
  <ul class="collapse">
  <li><a href="#section-25" id="toc-section-25" class="nav-link" data-scroll-target="#section-25"></a></li>
  <li><a href="#section-26" id="toc-section-26" class="nav-link" data-scroll-target="#section-26"></a></li>
  <li><a href="#section-27" id="toc-section-27" class="nav-link" data-scroll-target="#section-27"></a></li>
  <li><a href="#top-1-vs-top-10-1" id="toc-top-1-vs-top-10-1" class="nav-link" data-scroll-target="#top-1-vs-top-10-1">Top 1 vs Top 10?</a></li>
  <li><a href="#section-28" id="toc-section-28" class="nav-link" data-scroll-target="#section-28"></a></li>
  <li><a href="#section-29" id="toc-section-29" class="nav-link" data-scroll-target="#section-29"></a></li>
  </ul></li>
  <li><a href="#welfare-concept-methods" id="toc-welfare-concept-methods" class="nav-link" data-scroll-target="#welfare-concept-methods">Welfare concept &amp; methods</a>
  <ul class="collapse">
  <li><a href="#lis-pre--and-post-tax-data" id="toc-lis-pre--and-post-tax-data" class="nav-link" data-scroll-target="#lis-pre--and-post-tax-data">LIS pre- and post-tax data</a></li>
  <li><a href="#section-30" id="toc-section-30" class="nav-link" data-scroll-target="#section-30"></a></li>
  <li><a href="#wid-pre--vs-post-tax-data" id="toc-wid-pre--vs-post-tax-data" class="nav-link" data-scroll-target="#wid-pre--vs-post-tax-data">WID pre- vs post-tax data</a></li>
  <li><a href="#section-31" id="toc-section-31" class="nav-link" data-scroll-target="#section-31"></a></li>
  <li><a href="#individual-countries" id="toc-individual-countries" class="nav-link" data-scroll-target="#individual-countries">Individual countries</a></li>
  <li><a href="#section-32" id="toc-section-32" class="nav-link" data-scroll-target="#section-32"></a></li>
  <li><a href="#section-33" id="toc-section-33" class="nav-link" data-scroll-target="#section-33"></a></li>
  <li><a href="#section-34" id="toc-section-34" class="nav-link" data-scroll-target="#section-34"></a></li>
  <li><a href="#section-35" id="toc-section-35" class="nav-link" data-scroll-target="#section-35"></a></li>
  <li><a href="#section-36" id="toc-section-36" class="nav-link" data-scroll-target="#section-36"></a></li>
  <li><a href="#section-37" id="toc-section-37" class="nav-link" data-scroll-target="#section-37"></a></li>
  <li><a href="#section-38" id="toc-section-38" class="nav-link" data-scroll-target="#section-38"></a></li>
  <li><a href="#section-39" id="toc-section-39" class="nav-link" data-scroll-target="#section-39"></a></li>
  </ul></li>
  <li><a href="#triangulating-the-key-facts-of-global-inequality" id="toc-triangulating-the-key-facts-of-global-inequality" class="nav-link" data-scroll-target="#triangulating-the-key-facts-of-global-inequality">Triangulating the key facts of global inequality</a>
  <ul class="collapse">
  <li><a href="#section-40" id="toc-section-40" class="nav-link" data-scroll-target="#section-40"></a>
  <ul class="collapse">
  <li><a href="#since-1995" id="toc-since-1995" class="nav-link" data-scroll-target="#since-1995">Since 1995:</a></li>
  </ul></li>
  <li><a href="#section-41" id="toc-section-41" class="nav-link" data-scroll-target="#section-41"></a>
  <ul class="collapse">
  <li><a href="#since-1980" id="toc-since-1980" class="nav-link" data-scroll-target="#since-1980">Since 1980</a></li>
  </ul></li>
  <li><a href="#section-42" id="toc-section-42" class="nav-link" data-scroll-target="#section-42"></a>
  <ul class="collapse">
  <li><a href="#lessons-concept-3" id="toc-lessons-concept-3" class="nav-link" data-scroll-target="#lessons-concept-3">Lessons (Concept 3)</a></li>
  </ul></li>
  <li><a href="#section-43" id="toc-section-43" class="nav-link" data-scroll-target="#section-43"></a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a>
  <ul class="collapse">
  <li><a href="#countries-only-found-in-one-source---1995-vs-2015" id="toc-countries-only-found-in-one-source---1995-vs-2015" class="nav-link" data-scroll-target="#countries-only-found-in-one-source---1995-vs-2015">Countries only found in one source - 1995 vs 2015</a></li>
  <li><a href="#section-44" id="toc-section-44" class="nav-link" data-scroll-target="#section-44"></a></li>
  <li><a href="#section-45" id="toc-section-45" class="nav-link" data-scroll-target="#section-45"></a></li>
  <li><a href="#countries-only-found-in-one-source---1980-vs-2018" id="toc-countries-only-found-in-one-source---1980-vs-2018" class="nav-link" data-scroll-target="#countries-only-found-in-one-source---1980-vs-2018">Countries only found in one source - 1980 vs 2018</a></li>
  <li><a href="#section-46" id="toc-section-46" class="nav-link" data-scroll-target="#section-46"></a></li>
  <li><a href="#section-47" id="toc-section-47" class="nav-link" data-scroll-target="#section-47"></a></li>
  </ul></li>
  <li><a href="#ex-slide-graveyard" id="toc-ex-slide-graveyard" class="nav-link" data-scroll-target="#ex-slide-graveyard">Ex-slide graveyard</a>
  <ul class="collapse">
  <li><a href="#section-48" id="toc-section-48" class="nav-link" data-scroll-target="#section-48"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-wid" id="toc-different-worlds-wid" class="nav-link" data-scroll-target="#different-worlds-wid">Different ‘worlds’: <em>WID</em></a></li>
  </ul></li>
  <li><a href="#section-49" id="toc-section-49" class="nav-link" data-scroll-target="#section-49"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-world-bank-pip" id="toc-different-worlds-world-bank-pip" class="nav-link" data-scroll-target="#different-worlds-world-bank-pip">Different ‘worlds’: <em>World Bank PIP</em></a></li>
  </ul></li>
  <li><a href="#section-50" id="toc-section-50" class="nav-link" data-scroll-target="#section-50"></a>
  <ul class="collapse">
  <li><a href="#different-worlds-a-comparison" id="toc-different-worlds-a-comparison" class="nav-link" data-scroll-target="#different-worlds-a-comparison">Different worlds: a comparison</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#aligning-inequality-indices" id="toc-aligning-inequality-indices" class="nav-link" data-scroll-target="#aligning-inequality-indices">Aligning inequality indices</a>
  <ul class="collapse">
  <li><a href="#section-51" id="toc-section-51" class="nav-link" data-scroll-target="#section-51"></a></li>
  <li><a href="#section-52" id="toc-section-52" class="nav-link" data-scroll-target="#section-52"></a></li>
  <li><a href="#section-53" id="toc-section-53" class="nav-link" data-scroll-target="#section-53"></a></li>
  <li><a href="#section-54" id="toc-section-54" class="nav-link" data-scroll-target="#section-54"></a></li>
  <li><a href="#section-55" id="toc-section-55" class="nav-link" data-scroll-target="#section-55"></a></li>
  <li><a href="#section-56" id="toc-section-56" class="nav-link" data-scroll-target="#section-56"></a></li>
  <li><a href="#section-57" id="toc-section-57" class="nav-link" data-scroll-target="#section-57"></a></li>
  <li><a href="#section-58" id="toc-section-58" class="nav-link" data-scroll-target="#section-58"></a>
  <ul class="collapse">
  <li><a href="#section-59" id="toc-section-59" class="nav-link" data-scroll-target="#section-59"></a></li>
  </ul></li>
  <li><a href="#alternative-spec----5-years" id="toc-alternative-spec----5-years" class="nav-link" data-scroll-target="#alternative-spec----5-years">Alternative spec - +/-5 years</a></li>
  <li><a href="#section-60" id="toc-section-60" class="nav-link" data-scroll-target="#section-60"></a></li>
  <li><a href="#section-61" id="toc-section-61" class="nav-link" data-scroll-target="#section-61"></a></li>
  <li><a href="#bibliography" id="toc-bibliography" class="nav-link" data-scroll-target="#bibliography">Bibliography</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Triangulating a global view on inequality</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><br> <br> Joe Hasell – DPhil candidate at DSPI University of Oxford; Our World in Data<br> <br> Pablo Arriagada – Our World in Data </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display, HTML, IFrame, Markdown</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dataframe_image <span class="im">as</span> dfi</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> imgkit</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wrangling_and_plotting_functions <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_rows'</span>, <span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> <span class="st">'data_appendix/data/clean/pip.csv'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df_pip <span class="op">=</span> pd.read_csv(fp)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> <span class="st">'data_appendix/data/clean/wid.csv'</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df_wid <span class="op">=</span> pd.read_csv(fp)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> <span class="st">'data_appendix/data/clean/lis.csv'</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>df_lis <span class="op">=</span> pd.read_csv(fp)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> <span class="st">'data_appendix/data/clean/region_mapping.csv'</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>df_regions <span class="op">=</span> pd.read_csv(fp)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> <span class="st">'data_appendix/data/clean/population.csv'</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>df_pop <span class="op">=</span> pd.read_csv(fp)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>fp <span class="op">=</span> <span class="st">'data_appendix/data/clean/region_population.csv'</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>df_pop_regions <span class="op">=</span> pd.read_csv(fp)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Gather data into dictionary</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>source_dfs <span class="op">=</span> {</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"PIP"</span>: df_pip,</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"WID"</span>: df_wid,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"LIS"</span>: df_lis</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>tolerance_lookup <span class="op">=</span>  {</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">'var_search_term'</span>: [</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Gini'</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Top 1pc share'</span>, </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Top 10pc share'</span>,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'Bottom 50pc share'</span>],</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>                <span class="st">'var_tolerance'</span>: [</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">1</span>,</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">1</span>,</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">1</span>,</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>                    <span class="dv">1</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>                ]</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>            }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement,selected_vars):</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    msg <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> vs </span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> (+/- </span><span class="sc">{</span>max_dist_from_refs<span class="sc">}</span><span class="ss"> years)'</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(selected_vars)<span class="op">&gt;</span><span class="dv">1</span>:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> all_metrics_requirement:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>            msg <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss"> – Matched countries only'</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>            msg <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>msg<span class="sc">}</span><span class="ss"> – All available countries'</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(msg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="concepts" class="level2">
<h2 class="anchored" data-anchor-id="concepts">Concepts</h2>
<div class="r-fit-text">
<ul>
<li><p>Three concepts of global inequality <span class="citation" data-cites="Milanovic2007 AnandSegal2015-nh">(not quite <a href="#ref-Milanovic2007" role="doc-biblioref">Milanovic 2007</a>; or <a href="#ref-AnandSegal2015-nh" role="doc-biblioref">Anand and Segal 2015</a>)</span></p>
<p>1*. Average within-country inequality</p>
<p>2*. Average within-country inequality, weighting by population</p>
<ol start="3" type="1">
<li>Inequality across the world population taken as a whole
<ul>
<li>Future work</li>
</ul></li>
</ol></li>
<li><p>We will be looking at:</p>
<ul>
<li>Income(ish) inequality, not wealth</li>
<li>Relative inequality, not absolute</li>
</ul></li>
</ul>
</div>
</section>
<section id="section" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section"></h2>
<section id="why-do-we-need-a-global-view" class="level3">
<h3 class="anchored" data-anchor-id="why-do-we-need-a-global-view">Why do we need a global view?</h3>
<div class="r-fit-text">
<div class="incremental">
<ul class="incremental">
<li>Understanding the winners and losers of globalization and economic growth
<ul class="incremental">
<li><em>“We’re fighting for Main Street, not Wall Street. We have rejected globalism and embraced patriotism.”</em> - Donald Trump, <a href="https://www.youtube.com/watch?v=l83sbXD0nuY&amp;t=11m15s">Aug 2020</a></li>
</ul></li>
<li>To inform national policy to address inequality – both opportunities and limits</li>
<li>To inform international policy to address inequality (financial reporting transparency, tax havens, global taxation, migration, aid…)</li>
<li>A reflection of cosmopolitan values and outlook (e.g.&nbsp;UN’s SDGs)</li>
<li>As a guide to ‘Effective Altruism’, including charitable giving</li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-1"></h2>
<section id="a-clear-global-view-is-lacking" class="level3">
<h3 class="anchored" data-anchor-id="a-clear-global-view-is-lacking">A clear global view is lacking</h3>
<div class="r-fit-text">
<div class="incremental">
<ol class="incremental" type="1">
<li><strong>Limitations in the available data</strong>
<ul class="incremental">
<li>Coverage</li>
<li>Quality and comarabilty within secondary databases <span class="citation" data-cites="AtkinsonBrandolini2001-qt">(<a href="#ref-AtkinsonBrandolini2001-qt" role="doc-biblioref">Anthony B. Atkinson and Brandolini 2001</a>)</span></li>
<li>Much improved recently!
<ul class="incremental">
<li>Expanded coverage of harmonized secondary databases: World Bank’s <em>Poverty and Inequality Platform</em> (PIP), <em>World Inequality Database</em> (WID), <em>Luxembourg Income Study</em> (LIS)</li>
</ul></li>
</ul></li>
<li><strong>Different conceptual focus in richer and poorer countries</strong>
<ul class="incremental">
<li>Income inequality/relative poverty in high income countries</li>
<li>Absolute poverty in poorer countries</li>
<li>Much improved recently!
<ul class="incremental">
<li>Atkinson commission <span class="citation" data-cites="Atkinson2016-xp">(<a href="#ref-Atkinson2016-xp" role="doc-biblioref">2016</a>)</span>; ‘Societal poverty’ – <span class="citation" data-cites="World_Bank2018-eo">(<a href="#ref-World_Bank2018-eo" role="doc-biblioref">World Bank 2018</a>)</span>; UN SDGs; expansion of WID coverage</li>
</ul></li>
</ul></li>
<li><strong>Different ‘worlds’ of measurement</strong>
<ul class="incremental">
<li>Many methodological differences between different global databases, <em>often bundled together</em>
<ul class="incremental">
<li>Yield very different take-home messages about inequality and how it has evolved</li>
</ul></li>
</ul></li>
</ol>
</div>
</div>
</section>
</section>
<section id="section-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-2"></h2>
<section id="different-worlds-world-inequality-database" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-world-inequality-database">Different ‘worlds’: <em>World Inequality Database</em></h3>
<div class="incremental">
<blockquote class="blockquote">
<p>In recent decades, <strong>income inequality has increased in nearly all countries</strong>, but at different speeds… <span class="citation" data-cites="Alvaredo2018-qq">(<a href="#ref-Alvaredo2018-qq" role="doc-biblioref">Alvaredo et al. 2018</a>)</span></p>
</blockquote>
</div>
</section>
</section>
<section id="section-3" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-3"></h2>
<section id="different-worlds-world-inequality-database-1" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-world-inequality-database-1">Different ‘worlds’: <em>World Inequality Database</em></h3>
<p>The vast majority of global inequality (concept 3) is now due to differences <strong>within</strong> countries.</p>
<p><img src="images/WID_global_ineq_decomp.png" class="img-fluid"></p>
</section>
</section>
<section id="section-4" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-4"></h2>
<section id="different-worlds-world-bank-poverty-and-inequality-platform" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-world-bank-poverty-and-inequality-platform">Different ‘worlds’: <em>World Bank, Poverty and Inequality Platform</em></h3>
<div class="incremental">
<blockquote class="blockquote">
<p>[Since c.1993] the number of countries with rising inequality was <strong>slightly higher</strong> than the number of countries with falling inequality. Yet, the average Gini among these 91 countries actually <strong>declined</strong>. <span class="citation" data-cites="WBpoverty2016">(<a href="#ref-WBpoverty2016" role="doc-biblioref"><em>Poverty and Shared Prosperity 2016: Taking on Inequality</em> 2016</a>)</span></p>
</blockquote>
</div>
</section>
</section>
<section id="section-5" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-5"></h2>
<section id="different-worlds-world-bank-poverty-and-inequality-platform-1" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-world-bank-poverty-and-inequality-platform-1">Different ‘worlds’: <em>World Bank, Poverty and Inequality Platform</em></h3>
<p>The vast majority of global inequality (concept 3) remains due to differences <strong>between</strong> countries.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pip_global_ineq_decomp.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6"></h2>
<section id="different-worlds" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds">Different ‘worlds’</h3>
<div class="r-fit-text">
<div class="incremental">
<p>In terms of data availability, quality and comparability, we are in a better position than ever.</p>
<p>Yet some of the <em>most basic</em> questions are still open:</p>
<ul class="incremental">
<li>Is rising inequality within countries a near-ubiquitous, global phenomenon?
<ul class="incremental">
<li><strong>WID:</strong> Yes</li>
<li><strong>PIP:</strong> No</li>
</ul></li>
<li>Where do global inequalities lie: in differences <strong>between</strong> richer and poorer countries, or in differences between richer and poorer people <strong>within</strong> countries?
<ul class="incremental">
<li><strong>WID:</strong> Within countries</li>
<li><strong>PIP:</strong> Between countries</li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7"></h2>
<section id="different-methodologies" class="level3">
<h3 class="anchored" data-anchor-id="different-methodologies">Different methodologies</h3>
<div class="r-fit-text">
<div class="incremental">
<p>The different ‘worlds’ are separated by many methodological differences, often bundled together:</p>
<ul class="incremental">
<li>Inequality indices (and focal points in the distribution)
<ul class="incremental">
<li><strong>WID:</strong> Focus on the top</li>
<li><strong>PIP:</strong> Focus on overall inequality (e.g.&nbsp;Gini)</li>
</ul></li>
<li>Welfare concepts
<ul class="incremental">
<li><strong>WID:</strong> Focus on (and greatest coverage for) pre-tax national income</li>
<li><strong>PIP:</strong> mix of disposable income and consumption</li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-8" class="level2">
<h2 class="anchored" data-anchor-id="section-8"></h2>
<section id="different-methodologies-1" class="level3">
<h3 class="anchored" data-anchor-id="different-methodologies-1">Different methodologies</h3>
<div class="r-fit-text">
<div class="incremental">
<ul class="incremental">
<li>Underlying data sources
<ul class="incremental">
<li><strong>WID:</strong> Tax + NA + survey</li>
<li><strong>PIP:</strong> survey only</li>
</ul></li>
<li>Methodologies
<ul class="incremental">
<li><strong>WID:</strong> Adjustments for misisng top in survey data, Scaling to national accounts aggregates</li>
<li><strong>PIP:</strong> Some ex-post harmonization of welfare concepts</li>
</ul></li>
<li>Coverage
<ul class="incremental">
<li>Differences across the two datasets, impacting the time period that can be analysed</li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-9" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-9"></h2>
<p><strong>Connecting up these ‘worlds’ is a low-hanging fruit…</strong></p>
<div class="r-fit-text">
<div class="incremental">
<p><strong>For policy and public debate</strong></p>
<ul class="incremental">
<li>The data is better than ever</li>
<li>But the two ‘worlds’ of measurement makes the current data terrain <em>very</em> confusing
<ul class="incremental">
<li>Example: a summary of inequality trends <a href="https://www.un.org/en/un75/inequality-bridging-divide">from the UN</a>.</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="section-10" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="section-10"></h2>
<p><strong>Connecting up these ‘worlds’ is a low-hanging fruit…</strong></p>
<div class="r-fit-text">
<div class="incremental">
<p><strong>For academic research</strong></p>
<ul class="incremental">
<li>Existing studies tend to be based on only one ‘world’
<ul class="incremental">
<li>Flagship reports of the two institutions <span class="citation" data-cites="chancel2021 World_Bank2022-vr">(<a href="#ref-chancel2021" role="doc-biblioref">Chancel et al. 2021</a>; <a href="#ref-World_Bank2022-vr" role="doc-biblioref">World Bank 2022</a>)</span></li>
<li>Kanbur et al. <span class="citation" data-cites="Kanbur2022-lk">(<a href="#ref-Kanbur2022-lk" role="doc-biblioref">2022</a>)</span></li>
<li>Niño-Zarazúa et al. <span class="citation" data-cites="Nino-Zarazua2017-tv">(<a href="#ref-Nino-Zarazua2017-tv" role="doc-biblioref">2017</a>)</span></li>
<li>van Zanden et al. <span class="citation" data-cites="Van_Zanden2014-zo">(<a href="#ref-Van_Zanden2014-zo" role="doc-biblioref">2014</a>)</span></li>
<li>Ravallion<span class="citation" data-cites="Ravallion2014-mk">(<a href="#ref-Ravallion2014-mk" role="doc-biblioref">2014</a>)</span></li>
</ul></li>
<li>Two notable counter-examples:
<ul class="incremental">
<li>Anand and Segal <span class="citation" data-cites="AnandSegal2015-nh">(<a href="#ref-AnandSegal2015-nh" role="doc-biblioref">2015</a>)</span>
<ul class="incremental">
<li>Adjusts survey data to match WTID top income shares (with fairly small effect)</li>
<li>Estimtates up to 2005</li>
</ul></li>
<li>Lakner and Milanovic <span class="citation" data-cites="laknerMilanovic2016">(<a href="#ref-laknerMilanovic2016" role="doc-biblioref">2016</a>)</span>
<ul class="incremental">
<li>Adjusts survey data to match WTID top income shares (with fairly small effect)</li>
<li>Only considers impact on overall global inequality</li>
<li>Estimates up to 2008</li>
</ul></li>
<li>Neither focus on average within-country trends (Concepts 1* and 2* above)</li>
<li>Coverage in the WID data has expanded subsequently</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="connecting-up-the-worlds" class="level1">
<h1>Connecting up the ‘worlds’</h1>
<section id="section-11" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-11"></h2>
<section id="connecting-up-the-worlds-1" class="level3">
<h3 class="anchored" data-anchor-id="connecting-up-the-worlds-1">Connecting up the ‘worlds’</h3>
<ol type="1">
<li>Line up what we can:
<ul>
<li><p>Coverage and time period</p>
<ul>
<li>1995 vs 2015 (+/-3) – good coverage</li>
<li>1980 vs 2018 (+/-5) – much worse coverage, more relevant period</li>
</ul></li>
<li><p>Inequality indices</p></li>
<li><p>Income concept</p>
<ul>
<li>Very cursory glance <span class="citation" data-cites="MorelliYonzan2022-zn CarranzaNolan2022-ko">(unlike <a href="#ref-MorelliYonzan2022-zn" role="doc-biblioref">Yonzan et al. 2022</a>; <a href="#ref-CarranzaNolan2022-ko" role="doc-biblioref">Carranza, Morgan, and Nolan 2022</a>)</span></li>
</ul></li>
</ul></li>
</ol>
</section>
</section>
<section id="section-12" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-12"></h2>
<section id="connecting-up-the-worlds-2" class="level3">
<h3 class="anchored" data-anchor-id="connecting-up-the-worlds-2">Connecting up the ‘worlds’</h3>
<ol start="2" type="1">
<li>Triangulate
<ul>
<li>Pinpoint what we <em>don’t</em> know; what is behind the differences:
<ul>
<li>Particular countries?</li>
<li>Particular methodological differences?</li>
</ul></li>
<li>Gather together what we <em>do</em> know, irrespecive of the many remaining differences</li>
</ul></li>
</ol>
</section>
</section>
</section>
<section id="coverage" class="level1">
<h1>Coverage</h1>
<section id="section-13" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-13"></h2>
<p>Coverage gets very good in both datasets from ~1990.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_coverage <span class="op">=</span> pd.DataFrame()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>data_to_check <span class="op">=</span> {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Source'</span>: [<span class="st">'PIP'</span>, <span class="st">'WID'</span>],</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Metric'</span>: [<span class="st">'Gini'</span>, <span class="st">'Top 1pc share – pretax'</span>],</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df'</span>: [df_pip, df_wid]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>max_dist_from_ref <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> yr <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1960</span>, <span class="dv">2023</span>):</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> [<span class="dv">0</span>,<span class="dv">1</span>]:</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        matched_data <span class="op">=</span> closest_to_reference(</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>            df<span class="op">=</span>data_to_check[<span class="st">'df'</span>][i], </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>            reference_val <span class="op">=</span> yr, </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>            max_dist_from_ref <span class="op">=</span> max_dist_from_ref, </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>            reference_col <span class="op">=</span> <span class="st">'Year'</span>, </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>            group_by_col <span class="op">=</span> <span class="st">'Entity'</span>, </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>            value_col <span class="op">=</span> data_to_check[<span class="st">'Metric'</span>][i], </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>            tie_break <span class="op">=</span> <span class="st">'above'</span>)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>        df_pop_ref_year <span class="op">=</span> df_pop[df_pop[<span class="st">'Year'</span>]<span class="op">==</span>yr].drop(columns<span class="op">=</span>[<span class="st">'Year'</span>, <span class="st">'population'</span>])</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>        matched_data <span class="op">=</span> matched_data.merge(df_pop_ref_year, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>        coverage_yr <span class="op">=</span> pd.DataFrame({</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Year'</span>: [yr],</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">'No. of countries'</span>: [matched_data[<span class="st">'world_pop_share'</span>].count()],</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Share of World population'</span>: [matched_data[<span class="st">'world_pop_share'</span>].<span class="bu">sum</span>()]</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>        source <span class="op">=</span> data_to_check[<span class="st">'Source'</span>][i]</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        metric <span class="op">=</span> data_to_check[<span class="st">'Metric'</span>][i]</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>        coverage_yr[<span class="st">'Data'</span>] <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>source<span class="sc">}</span><span class="ss"> – </span><span class="sc">{</span>metric<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>        df_coverage <span class="op">=</span> pd.concat([df_coverage, coverage_yr])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df_coverage, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Share of World population"</span>, color<span class="op">=</span><span class="st">'Data'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="ss">f'Population coverage – within </span><span class="sc">{</span>max_dist_from_ref<span class="sc">}</span><span class="ss"> years'</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    legend_title<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    orientation<span class="op">=</span><span class="st">"h"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    yanchor<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">1.02</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    xanchor<span class="op">=</span><span class="st">"right"</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="dv">1</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="ccf57380-c9d2-4b43-a2b6-0472d5fc6fa0" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("ccf57380-c9d2-4b43-a2b6-0472d5fc6fa0")) {                    Plotly.newPlot(                        "ccf57380-c9d2-4b43-a2b6-0472d5fc6fa0",                        [{"hovertemplate":"Data=PIP \u2013 Gini<br>Year=%{x}<br>Share of World population=%{y}<extra></extra>","legendgroup":"PIP \u2013 Gini","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP \u2013 Gini","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[0.0,0.0,0.0,0.0,0.24,0.23,1.83,1.81,2.36,2.33,2.31,7.4399999999999995,7.59,7.5,22.689999999999998,23.95,24.160000000000004,26.410000000000004,54.400000000000006,54.47,56.620000000000005,62.67000000000001,67.58,70.13999999999999,73.76999999999998,74.02000000000001,74.96000000000001,76.26,78.26,81.41,85.97,86.75000000000003,88.46,89.22,89.00999999999999,89.91,89.79000000000002,73.89000000000001,72.61999999999999,75.08999999999999,75.0,92.83000000000001,93.44999999999999,94.68,95.39999999999999,97.49,98.35,97.28,97.24000000000001,97.36000000000001,96.60999999999999,97.17,98.03999999999999,97.75999999999999,99.02,99.03999999999999,96.99000000000001,94.28999999999999,91.8,85.88,81.48000000000003,77.68000000000002,60.550000000000004],"yaxis":"y","type":"scatter"},{"hovertemplate":"Data=WID \u2013 Top 1pc share \u2013 pretax<br>Year=%{x}<br>Share of World population=%{y}<extra></extra>","legendgroup":"WID \u2013 Top 1pc share \u2013 pretax","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID \u2013 Top 1pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[69.44,69.24,69.13000000000002,69.1,27.009999999999998,26.909999999999997,26.869999999999997,69.06,68.99,68.96000000000001,68.96,68.91,68.9,68.82,26.19,48.62,48.62,73.38000000000002,75.13000000000001,74.94000000000001,76.67999999999999,78.02,81.55,82.47000000000001,84.47000000000003,83.20000000000002,84.54000000000002,84.53999999999999,84.56,87.65,88.09,88.37,89.94,90.42,90.95,91.05000000000001,89.06000000000002,90.02000000000001,90.54,90.31,92.21999999999997,92.67000000000002,93.27,93.65,93.84,94.47999999999999,95.13999999999999,95.03999999999999,95.76,95.19,94.98000000000002,95.42,96.35,93.57,93.27,94.4,92.19,73.25,70.09,66.16000000000001,41.32,28.31,13.45],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Share of World population"}},"legend":{"title":{"text":""},"tracegroupgap":0,"orientation":"h","yanchor":"bottom","y":1.02,"xanchor":"right","x":1},"margin":{"t":60},"title":{"text":"Population coverage \u2013 within 3 years"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('ccf57380-c9d2-4b43-a2b6-0472d5fc6fa0');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="section-14" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-14"></h2>
<p>Coverage gets very good in both datasets from ~1990.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df_coverage, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"No. of countries"</span>, color<span class="op">=</span><span class="st">'Data'</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="ss">f'No. of countries – within </span><span class="sc">{</span>max_dist_from_ref<span class="sc">}</span><span class="ss"> years'</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    legend_title<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    orientation<span class="op">=</span><span class="st">"h"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    yanchor<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">1.02</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    xanchor<span class="op">=</span><span class="st">"right"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="dv">1</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="36744c19-5e3e-4043-ad57-59940d0f1a92" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("36744c19-5e3e-4043-ad57-59940d0f1a92")) {                    Plotly.newPlot(                        "36744c19-5e3e-4043-ad57-59940d0f1a92",                        [{"hovertemplate":"Data=PIP \u2013 Gini<br>Year=%{x}<br>No. of countries=%{y}<extra></extra>","legendgroup":"PIP \u2013 Gini","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP \u2013 Gini","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[0,0,0,0,1,1,2,2,3,3,3,3,4,4,5,6,9,13,22,23,25,31,41,47,57,59,63,66,70,78,90,95,101,107,108,116,116,121,121,131,136,142,145,151,152,151,154,154,156,156,153,154,156,156,153,152,149,142,134,119,108,95,64],"yaxis":"y","type":"scatter"},{"hovertemplate":"Data=WID \u2013 Top 1pc share \u2013 pretax<br>Year=%{x}<br>No. of countries=%{y}<extra></extra>","legendgroup":"WID \u2013 Top 1pc share \u2013 pretax","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID \u2013 Top 1pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[23,23,23,23,7,7,8,24,24,24,24,24,24,24,8,9,10,47,50,50,51,57,65,68,70,73,76,77,80,88,91,94,99,101,105,109,109,111,116,122,125,128,132,137,137,138,140,142,146,144,144,145,147,144,142,139,133,126,116,101,81,48,14],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"No. of countries"}},"legend":{"title":{"text":""},"tracegroupgap":0,"orientation":"h","yanchor":"bottom","y":1.02,"xanchor":"right","x":1},"margin":{"t":60},"title":{"text":"No. of countries \u2013 within 3 years"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('36744c19-5e3e-4043-ad57-59940d0f1a92');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="section-15" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-15"></h2>
<p>We can increase ‘coverage’ in 1980 by widening the net.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_coverage <span class="op">=</span> pd.DataFrame()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>data_to_check <span class="op">=</span> {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Source'</span>: [<span class="st">'PIP'</span>, <span class="st">'WID'</span>],</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Metric'</span>: [<span class="st">'Gini'</span>, <span class="st">'Top 1pc share – pretax'</span>],</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'df'</span>: [df_pip, df_wid]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>max_dist_from_ref <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> yr <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1960</span>, <span class="dv">2023</span>):</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> [<span class="dv">0</span>,<span class="dv">1</span>]:</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        matched_data <span class="op">=</span> closest_to_reference(</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>            df<span class="op">=</span>data_to_check[<span class="st">'df'</span>][i], </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>            reference_val <span class="op">=</span> yr, </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            max_dist_from_ref <span class="op">=</span> max_dist_from_ref, </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            reference_col <span class="op">=</span> <span class="st">'Year'</span>, </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>            group_by_col <span class="op">=</span> <span class="st">'Entity'</span>, </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            value_col <span class="op">=</span> data_to_check[<span class="st">'Metric'</span>][i], </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            tie_break <span class="op">=</span> <span class="st">'above'</span>)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>        df_pop_ref_year <span class="op">=</span> df_pop[df_pop[<span class="st">'Year'</span>]<span class="op">==</span>yr].drop(columns<span class="op">=</span>[<span class="st">'Year'</span>, <span class="st">'population'</span>])</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        matched_data <span class="op">=</span> matched_data.merge(df_pop_ref_year, how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        coverage_yr <span class="op">=</span> pd.DataFrame({</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Year'</span>: [yr],</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">'No. of countries'</span>: [matched_data[<span class="st">'world_pop_share'</span>].count()],</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Share of World population'</span>: [matched_data[<span class="st">'world_pop_share'</span>].<span class="bu">sum</span>()]</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        source <span class="op">=</span> data_to_check[<span class="st">'Source'</span>][i]</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>        metric <span class="op">=</span> data_to_check[<span class="st">'Metric'</span>][i]</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>        coverage_yr[<span class="st">'Data'</span>] <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>source<span class="sc">}</span><span class="ss"> – </span><span class="sc">{</span>metric<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>        df_coverage <span class="op">=</span> pd.concat([df_coverage, coverage_yr])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df_coverage, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"Share of World population"</span>, color<span class="op">=</span><span class="st">'Data'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="ss">f'Population coverage – within </span><span class="sc">{</span>max_dist_from_ref<span class="sc">}</span><span class="ss"> years'</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    legend_title<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    orientation<span class="op">=</span><span class="st">"h"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    yanchor<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">1.02</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    xanchor<span class="op">=</span><span class="st">"right"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="dv">1</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="008f9305-2343-4966-9eb3-4db8e57c9205" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("008f9305-2343-4966-9eb3-4db8e57c9205")) {                    Plotly.newPlot(                        "008f9305-2343-4966-9eb3-4db8e57c9205",                        [{"hovertemplate":"Data=PIP \u2013 Gini<br>Year=%{x}<br>Share of World population=%{y}<extra></extra>","legendgroup":"PIP \u2013 Gini","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP \u2013 Gini","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[0.0,0.0,0.24,0.24,1.89,1.8599999999999999,2.42,2.4,2.36,7.79,7.73,7.65,22.75,24.03,24.22,26.46,54.57,54.63999999999999,56.75,62.69,67.53,70.15,74.56,75.11,76.10999999999999,77.35000000000001,79.7,82.27,86.89000000000001,87.33999999999999,88.42000000000002,89.42000000000003,89.74,90.64000000000001,90.74,91.07000000000001,91.28999999999999,91.36999999999999,91.81,94.74,94.14999999999999,94.98999999999998,94.97,96.87,98.41,98.32,99.31,99.47,99.32,98.62,99.04000000000002,98.89,98.69,98.76999999999998,100.26000000000002,100.27999999999997,99.96,98.95999999999998,96.99,91.89,88.91,85.67,81.28000000000002],"yaxis":"y","type":"scatter"},{"hovertemplate":"Data=WID \u2013 Top 1pc share \u2013 pretax<br>Year=%{x}<br>Share of World population=%{y}<extra></extra>","legendgroup":"WID \u2013 Top 1pc share \u2013 pretax","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID \u2013 Top 1pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[69.44,69.24,69.13000000000002,69.1,69.19,69.14,69.1,69.06,68.99,68.96000000000001,68.96,68.91,68.9,68.82,68.83,74.1,75.49,75.31,77.0,78.30999999999999,81.83,82.68,84.76000000000002,85.42999999999999,85.78000000000003,85.69000000000004,86.46000000000001,88.73,89.14999999999999,89.51999999999998,90.14000000000001,91.00000000000001,91.53999999999999,92.27,92.32999999999998,92.77000000000002,93.49000000000002,93.54,93.68,94.61,94.97999999999999,94.28,94.5,94.64000000000001,95.35000000000001,96.03,96.63,96.63999999999999,96.88999999999999,96.53,96.68,96.75,96.97,96.95999999999998,96.88,96.57999999999998,96.12,94.41,92.13,73.12,69.84000000000002,65.85000000000002,41.28000000000001],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Share of World population"}},"legend":{"title":{"text":""},"tracegroupgap":0,"orientation":"h","yanchor":"bottom","y":1.02,"xanchor":"right","x":1},"margin":{"t":60},"title":{"text":"Population coverage \u2013 within 5 years"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('008f9305-2343-4966-9eb3-4db8e57c9205');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="section-16" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-16"></h2>
<p>We can increase ‘coverage’ in 1980 by widening the net.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df_coverage, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"No. of countries"</span>, color<span class="op">=</span><span class="st">'Data'</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="ss">f'No. of countries – within </span><span class="sc">{</span>max_dist_from_ref<span class="sc">}</span><span class="ss"> years'</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    legend_title<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    orientation<span class="op">=</span><span class="st">"h"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    yanchor<span class="op">=</span><span class="st">"bottom"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="fl">1.02</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    xanchor<span class="op">=</span><span class="st">"right"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="dv">1</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="f372cffe-f29b-4490-a690-d3c1681a0ef7" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f372cffe-f29b-4490-a690-d3c1681a0ef7")) {                    Plotly.newPlot(                        "f372cffe-f29b-4490-a690-d3c1681a0ef7",                        [{"hovertemplate":"Data=PIP \u2013 Gini<br>Year=%{x}<br>No. of countries=%{y}<extra></extra>","legendgroup":"PIP \u2013 Gini","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP \u2013 Gini","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[0,0,1,1,2,2,3,3,3,4,4,4,5,6,9,13,22,23,25,31,41,48,60,63,66,69,74,82,94,97,101,108,110,118,121,126,130,135,141,148,151,155,155,158,163,160,164,167,166,164,162,160,162,163,163,162,160,155,150,140,130,119,108],"yaxis":"y","type":"scatter"},{"hovertemplate":"Data=WID \u2013 Top 1pc share \u2013 pretax<br>Year=%{x}<br>No. of countries=%{y}<extra></extra>","legendgroup":"WID \u2013 Top 1pc share \u2013 pretax","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID \u2013 Top 1pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"xaxis":"x","y":[23,23,23,23,24,24,24,24,24,24,24,24,24,24,25,48,50,50,51,57,65,68,71,76,78,79,84,92,94,97,101,107,111,116,118,119,125,129,133,136,140,141,143,144,146,149,151,151,153,152,151,150,151,151,150,148,144,139,133,126,116,101,81],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"No. of countries"}},"legend":{"title":{"text":""},"tracegroupgap":0,"orientation":"h","yanchor":"bottom","y":1.02,"xanchor":"right","x":1},"margin":{"t":60},"title":{"text":"No. of countries \u2013 within 5 years"}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f372cffe-f29b-4490-a690-d3c1681a0ef7');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
</section>
<section id="vs-2015" class="level1">
<h1>1995 vs 2015</h1>
<section id="section-17" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-17"></h2>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set-up to compare WID and PIP top 10% share, all countries</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1995</span>, <span class="dv">2015</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2015 (+/- 3 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table WID vs PIP top 10% share, all countries</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table4.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[69976]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x114ba5220). One of the two will be used. Which one is undefined.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>[0307/105557.265746:INFO:headless_shell.cc(107)] 107796 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpmfudlikh/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table4.png" class="img-fluid"></p>
</section>
<section id="section-18" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-18"></h2>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch to alow only countries with matched data from both PIP and WID for top 10% share</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">True</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2015 (+/- 3 years) – Matched countries only</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table WID vs PIP top 10% share, only matched countries</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table5.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[69993]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x1173a5220). One of the two will be used. Which one is undefined.
[0307/105558.128234:INFO:headless_shell.cc(107)] 105515 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmp6_tmge0h/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table5.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Country coverage drops (less so population-weighted)</li>
<li>Drop in coverage not uniform across regions and source (LAC and SS Africa in PIP)</li>
</ul>
</div>
</section>
<section id="section-19" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-19"></h2>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2015 (+/- 3 years) – Matched countries only</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table5.png" class="img-fluid"></p>
<div class="incremental">
<p>Key differences:</p>
<ul class="incremental">
<li>Inequality is far higher in WID than PIP</li>
<li>A very substantial rise in the pop-weighted average in WID.</li>
</ul>
</div>
</section>
<section id="section-20" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-20"></h2>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2015 (+/- 3 years) – Matched countries only</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table5.png" class="img-fluid"></p>
<div class="incremental">
<p>Key similarities:</p>
<ul class="incremental">
<li>Rising vs falling: approx. equal in both sources</li>
<li>Unweighted avg approx. stable in both (a fall in PIP)</li>
<li>Weighted average less benign trend than unweighted average</li>
</ul>
</div>
</section>
<section id="section-21" class="level2">
<h2 class="anchored" data-anchor-id="section-21"></h2>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter WID (WID vs PIP top 10% share, only matched countries)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>plot_change_scatter(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> selected_vars[<span class="dv">0</span>],</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="e3fe471e-3bd4-4d27-ad2e-577d7d993bd3" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("e3fe471e-3bd4-4d27-ad2e-577d7d993bd3")) {                    Plotly.newPlot(                        "e3fe471e-3bd4-4d27-ad2e-577d7d993bd3",                        [{"customdata":[[1996,2015,"EE & CA",1.066412764546628,"WID: Top 10pc share \u2013 pretax"],[1996,2015,"EE & CA",1.4957554338698364,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.0408438443102175,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.0687465327979926,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.266299001742632,"WID: Top 10pc share \u2013 pretax"],[1993,2015,"EE & CA",1.0777513604548226,"WID: Top 10pc share \u2013 pretax"],[1997,2015,"EE & CA",1.091927763659345,"WID: Top 10pc share \u2013 pretax"],[1996,2015,"EE & CA",1.0441748375179856,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",2.090588692991161,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.5551941413441521,"WID: Top 10pc share \u2013 pretax"],[1996,2015,"EE & CA",1.2858102656015802,"WID: Top 10pc share \u2013 pretax"],[1998,2015,"EE & CA",1.1058153529217831,"WID: Top 10pc share \u2013 pretax"],[1997,2015,"EE & CA",1.1393977043932897,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",5.137368653657179,"WID: Top 10pc share \u2013 pretax"],[1998,2015,"EE & CA",1.1534819708108406,"WID: Top 10pc share \u2013 pretax"],[1996,2015,"EE & CA",1.0663012471640796,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",2.2751901578996057,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.2621747822919018,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.0433967424955701,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"EE & CA",1.1935142419142832,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Albania","Kazakhstan","Latvia","Lithuania","Hungary","Moldova","Georgia","North Macedonia","Poland","Romania","Czechia","Croatia","Slovakia","Russia","Kyrgyzstan","Armenia","Ukraine","Belarus","Slovenia","Bulgaria"],"legendgroup":"EE & CA","marker":{"color":"#636efa","size":[1.066412764546628,1.4957554338698364,1.0408438443102175,1.0687465327979926,1.266299001742632,1.0777513604548226,1.091927763659345,1.0441748375179856,2.090588692991161,1.5551941413441521,1.2858102656015802,1.1058153529217831,1.1393977043932897,5.137368653657179,1.1534819708108406,1.0663012471640796,2.2751901578996057,1.2621747822919018,1.0433967424955701,1.1935142419142832],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"EE & CA","orientation":"v","showlegend":true,"x":[32.57,40.82,33.59,35.010000000000005,25.81,34.08,46.54,36.27,30.98,37.01,30.0,33.08,25.92,42.3,43.35,46.77,42.49,34.62,28.02,40.52],"xaxis":"x","y":[35.23,37.3,35.88,37.66,32.879999999999995,35.370000000000005,46.84,32.21,37.78,42.42,30.83,34.29,31.7,44.86,39.68,40.56,32.12,32.11,29.020000000000003,39.08],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"East Asia",1.068775015095492,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"East Asia",41.0,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"East Asia",1.6587312550098976,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Mongolia","China","Taiwan"],"legendgroup":"East Asia","marker":{"color":"#EF553B","size":[1.068775015095492,41.0,1.6587312550098976],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"East Asia","orientation":"v","showlegend":true,"x":[42.51,33.900000000000006,38.74],"xaxis":"x","y":[43.44,41.66,47.32],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"LAC",6.875013443762857,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"LAC",2.2256474983587164,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"LAC",2.33655228181494,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"LAC",4.433393986869177,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Brazil","Argentina","Colombia","Mexico"],"legendgroup":"LAC","marker":{"color":"#00cc96","size":[6.875013443762857,2.2256474983587164,2.33655228181494,4.433393986869177],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"LAC","orientation":"v","showlegend":true,"x":[60.91,49.16,58.14,54.22],"xaxis":"x","y":[59.88,43.24,52.48,63.1],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"MENA",1.3154978351619921,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"MENA",3.7894958357779234,"WID: Top 10pc share \u2013 pretax"],[1994,2015,"MENA",3.3320292520574304,"WID: Top 10pc share \u2013 pretax"],[1997,2015,"MENA",1.2135702010009157,"WID: Top 10pc share \u2013 pretax"],[1998,2014,"MENA",1.802418014408297,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"MENA",3.270451443647321,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Tunisia","Egypt","Iran","Israel","Yemen","Turkey"],"legendgroup":"MENA","marker":{"color":"#ab63fa","size":[1.3154978351619921,3.7894958357779234,3.3320292520574304,1.2135702010009157,1.802418014408297,3.270451443647321],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"MENA","orientation":"v","showlegend":true,"x":[49.0,45.87,53.49,49.04,55.11000000000001,54.78],"xaxis":"x","y":[41.370000000000005,49.39,50.24,48.09,58.16,52.080000000000005],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"S & SE Asia",3.001943542112826,"WID: Top 10pc share \u2013 pretax"],[1995,2016,"S & SE Asia",1.5962699211374352,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"S & SE Asia",1.8756991184673653,"WID: Top 10pc share \u2013 pretax"],[1997,2016,"S & SE Asia",3.6306498329273147,"WID: Top 10pc share \u2013 pretax"],[1996,2015,"S & SE Asia",7.0410000045357775,"WID: Top 10pc share \u2013 pretax"],[1994,2015,"S & SE Asia",3.9418866934137884,"WID: Top 10pc share \u2013 pretax"],[1997,2018,"S & SE Asia",1.1785313188138329,"WID: Top 10pc share \u2013 pretax"],[1995,2016,"S & SE Asia",5.515264886001998,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"S & SE Asia",8.422697847655154,"WID: Top 10pc share \u2013 pretax"],[1995,2013,"S & SE Asia",38.96578696231604,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Thailand","Sri Lanka","Malaysia","Vietnam","Pakistan","Philippines","Laos","Bangladesh","Indonesia","India"],"legendgroup":"S & SE Asia","marker":{"color":"#FFA15A","size":[3.001943542112826,1.5962699211374352,1.8756991184673653,3.6306498329273147,7.0410000045357775,3.9418866934137884,1.1785313188138329,5.515264886001998,8.422697847655154,38.96578696231604],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"S & SE Asia","orientation":"v","showlegend":true,"x":[55.57,45.3,47.08,46.41,42.22,50.0,47.4,44.88,47.71,39.28],"xaxis":"x","y":[50.29,48.98,40.27,43.830000000000005,44.1,46.97,48.3,42.39,44.97,56.27],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"SS Africa",3.9258233667119184,"WID: Top 10pc share \u2013 pretax"],[1996,2016,"SS Africa",2.0597005601367533,"WID: Top 10pc share \u2013 pretax"],[1993,2015,"SS Africa",1.0498371871696688,"WID: Top 10pc share \u2013 pretax"],[1994,2014,"SS Africa",1.521082685257403,"WID: Top 10pc share \u2013 pretax"],[1992,2013,"SS Africa",1.2916489068930284,"WID: Top 10pc share \u2013 pretax"],[1996,2014,"SS Africa",1.6443900162509955,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"SS Africa",1.6611603470795062,"WID: Top 10pc share \u2013 pretax"],[1994,2016,"SS Africa",1.0162086668126993,"WID: Top 10pc share \u2013 pretax"],[1994,2015,"SS Africa",2.3288508063886466,"WID: Top 10pc share \u2013 pretax"],[1992,2015,"SS Africa",1.0483430150306834,"WID: Top 10pc share \u2013 pretax"],[1992,2018,"SS Africa",6.266536475051434,"WID: Top 10pc share \u2013 pretax"],[1996,2015,"SS Africa",1.4501700622497768,"WID: Top 10pc share \u2013 pretax"],[1994,2017,"SS Africa",1.0444782371527408,"WID: Top 10pc share \u2013 pretax"],[1996,2014,"SS Africa",1.754374235773319,"WID: Top 10pc share \u2013 pretax"],[1997,2012,"SS Africa",1.6971701827489887,"WID: Top 10pc share \u2013 pretax"],[1997,2016,"SS Africa",1.470001809379581,"WID: Top 10pc share \u2013 pretax"],[1995,2014,"SS Africa",1.0969549465919919,"WID: Top 10pc share \u2013 pretax"],[1994,2014,"SS Africa",1.5615697543370473,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Ethiopia","Uganda","Botswana","Burkina Faso","Burundi","Cameroon","Cote d'Ivoire","Eswatini","Kenya","Gambia","Nigeria","Zambia","Lesotho","Mozambique","Madagascar","Malawi","Mauritania","Niger"],"legendgroup":"SS Africa","marker":{"color":"#19d3f3","size":[3.9258233667119184,2.0597005601367533,1.0498371871696688,1.521082685257403,1.2916489068930284,1.6443900162509955,1.6611603470795062,1.0162086668126993,2.3288508063886466,1.0483430150306834,6.266536475051434,1.4501700622497768,1.0444782371527408,1.754374235773319,1.6971701827489887,1.470001809379581,1.0969549465919919,1.5615697543370473],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"SS Africa","orientation":"v","showlegend":true,"x":[58.32000000000001,48.89,69.38,57.95,42.91,54.31,47.45,67.67999999999999,51.16,55.25,46.8,54.99000000000001,64.35,61.970000000000006,47.010000000000005,51.35,44.95,50.0],"xaxis":"x","y":[45.47,52.07000000000001,59.260000000000005,47.260000000000005,48.39,52.05,48.65,59.88,48.72,45.87,42.72,61.74,49.51,64.63,50.760000000000005,58.51,40.48,43.3],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"W. Europe",1.4729351989020942,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",2.856372586856456,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.1176143456449015,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.306612248413948,"WID: Top 10pc share \u2013 pretax"],[1994,2015,"W. Europe",1.0,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.2214360813016873,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.2664452606372514,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.2939312519641293,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.1466717730851306,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",3.340137059614987,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.1409770937288262,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",2.8157566009262345,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",1.132676456423279,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Europe",2.316787404917874,"WID: Top 10pc share \u2013 pretax"],[1995,2014,"W. Europe",2.7130578200451563,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Netherlands","United Kingdom","Ireland","Belgium","Luxembourg","Switzerland","Sweden","Greece","Denmark","Germany","Finland","France","Norway","Spain","Italy"],"legendgroup":"W. Europe","marker":{"color":"#FF6692","size":[1.4729351989020942,2.856372586856456,1.1176143456449015,1.306612248413948,1.0,1.2214360813016873,1.2664452606372514,1.2939312519641293,1.1466717730851306,3.340137059614987,1.1409770937288262,2.8157566009262345,1.132676456423279,2.316787404917874,2.7130578200451563],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Europe","orientation":"v","showlegend":true,"x":[27.62,34.489999999999995,33.15,32.47,35.58,29.83,31.49,35.35,28.45,29.79,29.87,31.71,27.51,35.52,33.36],"xaxis":"x","y":[29.25,35.69,35.260000000000005,31.83,33.42,32.72,31.09,35.46,33.19,38.17,32.93,32.47,30.76,35.32,35.75],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"W. Offshoots",2.0095913555411666,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Offshoots",10.303787297630485,"WID: Top 10pc share \u2013 pretax"],[1995,2015,"W. Offshoots",1.6675775350389128,"WID: Top 10pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Canada","United States","Australia"],"legendgroup":"W. Offshoots","marker":{"color":"#B6E880","size":[2.0095913555411666,10.303787297630485,1.6675775350389128],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Offshoots","orientation":"v","showlegend":true,"x":[36.47,39.900000000000006,28.2],"xaxis":"x","y":[41.25,45.51,32.879999999999995],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"value1995"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value2015"}},"legend":{"title":{"text":"region"},"tracegroupgap":0,"itemsizing":"constant"},"title":{"text":"WID: Top 10pc share \u2013 pretax, 1995 vs 2015 (+/- 3)"},"height":600,"shapes":[{"line":{"color":"#808080"},"opacity":0.5,"type":"line","x0":25.81,"x1":69.38,"xref":"x","y0":25.81,"y1":69.38,"yref":"y"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('e3fe471e-3bd4-4d27-ad2e-577d7d993bd3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="section-22" class="level2">
<h2 class="anchored" data-anchor-id="section-22"></h2>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter WID (WID vs PIP top 10% share, only matched countries)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>plot_change_scatter(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> selected_vars[<span class="dv">1</span>],</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="53082a3b-73cf-48bb-8986-283ae2b75bc0" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("53082a3b-73cf-48bb-8986-283ae2b75bc0")) {                    Plotly.newPlot(                        "53082a3b-73cf-48bb-8986-283ae2b75bc0",                        [{"customdata":[[1998,2015,"EE & CA",1.0441748375179856,"PIP: Top 10pc share"],[1996,2015,"EE & CA",1.1393977043932897,"PIP: Top 10pc share"],[1993,2015,"EE & CA",1.0433967424955701,"PIP: Top 10pc share"],[1993,2015,"EE & CA",1.0687465327979926,"PIP: Top 10pc share"],[1995,2015,"EE & CA",1.0408438443102175,"PIP: Top 10pc share"],[1996,2015,"EE & CA",1.066412764546628,"PIP: Top 10pc share"],[1998,2015,"EE & CA",1.2621747822919018,"PIP: Top 10pc share"],[1994,2015,"EE & CA",1.266299001742632,"PIP: Top 10pc share"],[1998,2015,"EE & CA",1.1534819708108406,"PIP: Top 10pc share"],[1995,2015,"EE & CA",1.5551941413441521,"PIP: Top 10pc share"],[1995,2015,"EE & CA",2.090588692991161,"PIP: Top 10pc share"],[1996,2015,"EE & CA",1.4957554338698364,"PIP: Top 10pc share"],[1997,2015,"EE & CA",1.0777513604548226,"PIP: Top 10pc share"],[1996,2015,"EE & CA",1.2858102656015802,"PIP: Top 10pc share"],[1996,2015,"EE & CA",5.137368653657179,"PIP: Top 10pc share"],[1992,2015,"EE & CA",1.1935142419142832,"PIP: Top 10pc share"],[1995,2015,"EE & CA",2.2751901578996057,"PIP: Top 10pc share"],[1996,2015,"EE & CA",1.0663012471640796,"PIP: Top 10pc share"],[1998,2015,"EE & CA",1.1058153529217831,"PIP: Top 10pc share"],[1996,2015,"EE & CA",1.091927763659345,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["North Macedonia","Slovakia","Slovenia","Lithuania","Latvia","Albania","Belarus","Hungary","Kyrgyzstan","Romania","Poland","Kazakhstan","Moldova","Czechia","Russia","Bulgaria","Ukraine","Armenia","Croatia","Georgia"],"legendgroup":"EE & CA","marker":{"color":"#636efa","size":[1.0441748375179856,1.1393977043932897,1.0433967424955701,1.0687465327979926,1.0408438443102175,1.066412764546628,1.2621747822919018,1.266299001742632,1.1534819708108406,1.5551941413441521,2.090588692991161,1.4957554338698364,1.0777513604548226,1.2858102656015802,5.137368653657179,1.1935142419142832,2.2751901578996057,1.0663012471640796,1.1058153529217831,1.091927763659345],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"EE & CA","orientation":"v","showlegend":true,"x":[22.20575592482406,21.42452528715128,24.47729334596415,27.98935642206068,25.09462065255701,21.21557312580965,24.91442457207991,26.23711820399678,35.27055328174229,24.65465010048625,26.56114968083937,26.29015848065932,28.10591095134148,22.13857611299726,35.5517381529143,24.74236237622629,30.39890081906167,35.22151334373353,22.48067581957292,27.928534683136807],"xaxis":"x","y":[24.81118001321085,20.9411636593697,21.05658358700062,28.619515008731938,26.16270276699657,24.77930791254988,21.21172714255211,23.790870548277272,24.77225734070999,24.76709762070889,24.23273099188624,22.58604411789284,22.5265756966328,22.1298756988746,29.69136837667896,28.7362005290648,21.58766368074192,26.735056420171848,23.232423729639,27.79185280760555],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2016,"East Asia",1.068775015095492,"PIP: Top 10pc share"],[1995,2016,"East Asia",1.6587312550098976,"PIP: Top 10pc share"],[1996,2015,"East Asia",41.0,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Mongolia","Taiwan","China"],"legendgroup":"East Asia","marker":{"color":"#EF553B","size":[1.068775015095492,1.6587312550098976,41.0],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"East Asia","orientation":"v","showlegend":true,"x":[24.961757048804788,24.60475774000452,27.29834543870071],"xaxis":"x","y":[25.6189693211674,25.12497514572108,29.41269842467379],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2016,"LAC",2.2256474983587164,"PIP: Top 10pc share"],[1994,2016,"LAC",4.433393986869177,"PIP: Top 10pc share"],[1996,2015,"LAC",2.33655228181494,"PIP: Top 10pc share"],[1995,2015,"LAC",6.875013443762857,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Argentina","Mexico","Colombia","Brazil"],"legendgroup":"LAC","marker":{"color":"#00cc96","size":[2.2256474983587164,4.433393986869177,2.33655228181494,6.875013443762857],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"LAC","orientation":"v","showlegend":true,"x":[36.97560342797953,42.34742445707325,45.63734615669648,47.543864784350845],"xaxis":"x","y":[30.41932492186919,37.77360006627427,39.94302769905151,40.854948257856336],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"MENA",1.3154978351619921,"PIP: Top 10pc share"],[1994,2015,"MENA",3.3320292520574304,"PIP: Top 10pc share"],[1998,2014,"MENA",1.802418014408297,"PIP: Top 10pc share"],[1995,2015,"MENA",3.7894958357779234,"PIP: Top 10pc share"],[1994,2015,"MENA",3.270451443647321,"PIP: Top 10pc share"],[1997,2015,"MENA",1.2135702010009157,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Tunisia","Iran","Yemen","Egypt","Turkey","Israel"],"legendgroup":"MENA","marker":{"color":"#ab63fa","size":[1.3154978351619921,3.3320292520574304,1.802418014408297,3.7894958357779234,3.270451443647321,1.2135702010009157],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"MENA","orientation":"v","showlegend":true,"x":[31.749409729401552,33.292644889862125,26.82937822110744,26.04405909690255,31.95953455757918,28.16099824304172],"xaxis":"x","y":[25.57188377636751,30.56015367729257,29.43562494292532,27.782394689257178,33.45910735316054,28.554287806564787],"yaxis":"y","type":"scatter"},{"customdata":[[1994,2015,"S & SE Asia",3.9418866934137884,"PIP: Top 10pc share"],[1996,2015,"S & SE Asia",7.0410000045357775,"PIP: Top 10pc share"],[1997,2018,"S & SE Asia",1.1785313188138329,"PIP: Top 10pc share"],[1995,2016,"S & SE Asia",1.5962699211374352,"PIP: Top 10pc share"],[1994,2015,"S & SE Asia",3.001943542112826,"PIP: Top 10pc share"],[1996,2015,"S & SE Asia",8.422697847655154,"PIP: Top 10pc share"],[1993,2015,"S & SE Asia",38.96578696231604,"PIP: Top 10pc share"],[1995,2016,"S & SE Asia",5.515264886001998,"PIP: Top 10pc share"],[1997,2016,"S & SE Asia",3.6306498329273147,"PIP: Top 10pc share"],[1995,2015,"S & SE Asia",1.8756991184673653,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Philippines","Pakistan","Laos","Sri Lanka","Thailand","Indonesia","India","Bangladesh","Vietnam","Malaysia"],"legendgroup":"S & SE Asia","marker":{"color":"#FFA15A","size":[3.9418866934137884,7.0410000045357775,1.1785313188138329,1.5962699211374352,3.001943542112826,8.422697847655154,38.96578696231604,5.515264886001998,3.6306498329273147,1.8756991184673653],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"S & SE Asia","orientation":"v","showlegend":true,"x":[33.591640702717115,25.18821607794099,29.111426438899603,28.97121183188302,34.88896679087406,29.6562235077566,26.66824100980147,28.082972381126385,29.05268070082353,37.8570968428066],"xaxis":"x","y":[31.452443114255868,26.968858151509167,31.247059056227062,32.56268442465794,28.39726561712883,32.9936513367263,29.729286559122496,26.835072184627016,27.11811105517214,31.273351935859388],"yaxis":"y","type":"scatter"},{"customdata":[[1997,2016,"SS Africa",1.470001809379581,"PIP: Top 10pc share"],[1994,2017,"SS Africa",1.0444782371527408,"PIP: Top 10pc share"],[1995,2014,"SS Africa",1.0969549465919919,"PIP: Top 10pc share"],[1994,2015,"SS Africa",2.3288508063886466,"PIP: Top 10pc share"],[1996,2015,"SS Africa",6.266536475051434,"PIP: Top 10pc share"],[1993,2012,"SS Africa",1.6971701827489887,"PIP: Top 10pc share"],[1992,2013,"SS Africa",1.2916489068930284,"PIP: Top 10pc share"],[1995,2015,"SS Africa",1.6611603470795062,"PIP: Top 10pc share"],[1995,2015,"SS Africa",3.9258233667119184,"PIP: Top 10pc share"],[1994,2016,"SS Africa",1.0162086668126993,"PIP: Top 10pc share"],[1996,2014,"SS Africa",1.754374235773319,"PIP: Top 10pc share"],[1996,2014,"SS Africa",1.6443900162509955,"PIP: Top 10pc share"],[1994,2014,"SS Africa",1.521082685257403,"PIP: Top 10pc share"],[1993,2015,"SS Africa",1.0498371871696688,"PIP: Top 10pc share"],[1996,2016,"SS Africa",2.0597005601367533,"PIP: Top 10pc share"],[1996,2015,"SS Africa",1.4501700622497768,"PIP: Top 10pc share"],[1998,2015,"SS Africa",1.0483430150306834,"PIP: Top 10pc share"],[1994,2014,"SS Africa",1.5615697543370473,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Malawi","Lesotho","Mauritania","Kenya","Nigeria","Madagascar","Burundi","Cote d'Ivoire","Ethiopia","Eswatini","Mozambique","Cameroon","Burkina Faso","Botswana","Uganda","Zambia","Gambia","Niger"],"legendgroup":"SS Africa","marker":{"color":"#19d3f3","size":[1.470001809379581,1.0444782371527408,1.0969549465919919,2.3288508063886466,6.266536475051434,1.6971701827489887,1.2916489068930284,1.6611603470795062,3.9258233667119184,1.0162086668126993,1.754374235773319,1.6443900162509955,1.521082685257403,1.0498371871696688,2.0597005601367533,1.4501700622497768,1.0483430150306834,1.5615697543370473],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"SS Africa","orientation":"v","showlegend":true,"x":[61.491135433637176,48.27369745051179,28.68938970923493,33.3730125650401,40.68897105834148,37.03966567227743,26.58476054038229,32.78381856153849,38.047899417569,49.53159353506589,43.75473012843008,36.15324546641242,39.46891360469329,51.20005807881838,31.34110540433529,37.32990527607639,37.66425673355155,32.47347870672172],"xaxis":"x","y":[38.09349210018316,32.89834079490976,24.92960424045815,31.56148317472791,26.8831886366113,33.486466119228,31.024532084718047,31.93143421352687,28.46475175982657,42.73134934159001,45.47815357233534,35.04315275269829,29.6012983922883,41.47603335167135,34.21103756175788,44.38089360325545,28.73220849658238,27.02249770251643],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,"W. Europe",1.306612248413948,"PIP: Top 10pc share"],[1993,2015,"W. Europe",1.4729351989020942,"PIP: Top 10pc share"],[1995,2015,"W. Europe",1.132676456423279,"PIP: Top 10pc share"],[1994,2015,"W. Europe",2.8157566009262345,"PIP: Top 10pc share"],[1995,2015,"W. Europe",3.340137059614987,"PIP: Top 10pc share"],[1995,2015,"W. Europe",1.2939312519641293,"PIP: Top 10pc share"],[1995,2015,"W. Europe",1.1176143456449015,"PIP: Top 10pc share"],[1995,2015,"W. Europe",2.856372586856456,"PIP: Top 10pc share"],[1995,2015,"W. Europe",2.7130578200451563,"PIP: Top 10pc share"],[1992,2015,"W. Europe",1.2214360813016873,"PIP: Top 10pc share"],[1995,2015,"W. Europe",1.2664452606372514,"PIP: Top 10pc share"],[1995,2015,"W. Europe",2.316787404917874,"PIP: Top 10pc share"],[1994,2015,"W. Europe",1.0,"PIP: Top 10pc share"],[1995,2015,"W. Europe",1.1466717730851306,"PIP: Top 10pc share"],[1995,2015,"W. Europe",1.1409770937288262,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Belgium","Netherlands","Norway","France","Germany","Greece","Ireland","United Kingdom","Italy","Switzerland","Sweden","Spain","Luxembourg","Denmark","Finland"],"legendgroup":"W. Europe","marker":{"color":"#FF6692","size":[1.306612248413948,1.4729351989020942,1.132676456423279,2.8157566009262345,3.340137059614987,1.2939312519641293,1.1176143456449015,2.856372586856456,2.7130578200451563,1.2214360813016873,1.2664452606372514,2.316787404917874,1.0,1.1466717730851306,1.1409770937288262],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Europe","orientation":"v","showlegend":true,"x":[22.84579760828445,22.80390105336022,21.68344342516943,25.60320769852329,22.99034626888836,27.32148180003204,28.63001101875347,27.3036075390022,26.15648121915005,26.35564623695612,20.04370395836737,27.46075073992532,21.86445496226565,19.80455622634153,20.54394745409158],"xaxis":"x","y":[22.22709612510157,23.02391858527167,22.276972189035448,26.636388222367703,24.82756833586463,26.23421332560782,25.39732334100746,25.407354273194123,25.76257214327098,25.244078051286017,22.88693043176868,26.23365915221284,25.07038901256787,23.83117072539645,22.40037113360183],"yaxis":"y","type":"scatter"},{"customdata":[[1994,2015,"W. Offshoots",2.0095913555411666,"PIP: Top 10pc share"],[1995,2015,"W. Offshoots",10.303787297630485,"PIP: Top 10pc share"],[1995,2016,"W. Offshoots",1.6675775350389128,"PIP: Top 10pc share"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1995=%{x:.2f}<br>value2015=%{y:.2f}<br>Year1995=%{customdata[0]}<br>Year2015=%{customdata[1]}<extra></extra>","hovertext":["Canada","United States","Australia"],"legendgroup":"W. Offshoots","marker":{"color":"#B6E880","size":[2.0095913555411666,10.303787297630485,1.6675775350389128],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Offshoots","orientation":"v","showlegend":true,"x":[23.6173687179347,29.684254677274208,24.6017009978003],"xaxis":"x","y":[25.47064128397331,30.495417568909648,25.80829233447277],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"value1995"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value2015"}},"legend":{"title":{"text":"region"},"tracegroupgap":0,"itemsizing":"constant"},"title":{"text":"PIP: Top 10pc share, 1995 vs 2015 (+/- 3)"},"height":600,"shapes":[{"line":{"color":"#808080"},"opacity":0.5,"type":"line","x0":19.80455622634153,"x1":61.491135433637176,"xref":"x","y0":19.80455622634153,"y1":61.491135433637176,"yref":"y"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('53082a3b-73cf-48bb-8986-283ae2b75bc0');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="section-23" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="section-23"></h2>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter difference (WID vs PIP top 10% share, only matched countries)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>plot_change_scatter(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> <span class="st">'diff'</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="9a6170a1-2d4b-407f-9793-408c9feb3a6b" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("9a6170a1-2d4b-407f-9793-408c9feb3a6b")) {                    Plotly.newPlot(                        "9a6170a1-2d4b-407f-9793-408c9feb3a6b",                        [{"customdata":[[1996,2015,1996,2015,"EE & CA",1.066412764546628],[1996,2015,1996,2015,"EE & CA",1.4957554338698364],[1995,2015,1995,2015,"EE & CA",1.0408438443102175],[1995,2015,1993,2015,"EE & CA",1.0687465327979926],[1995,2015,1994,2015,"EE & CA",1.266299001742632],[1993,2015,1997,2015,"EE & CA",1.0777513604548226],[1997,2015,1996,2015,"EE & CA",1.091927763659345],[1996,2015,1998,2015,"EE & CA",1.0441748375179856],[1995,2015,1995,2015,"EE & CA",2.090588692991161],[1995,2015,1995,2015,"EE & CA",1.5551941413441521],[1996,2015,1996,2015,"EE & CA",1.2858102656015802],[1998,2015,1998,2015,"EE & CA",1.1058153529217831],[1997,2015,1996,2015,"EE & CA",1.1393977043932897],[1995,2015,1996,2015,"EE & CA",5.137368653657179],[1998,2015,1998,2015,"EE & CA",1.1534819708108406],[1996,2015,1996,2015,"EE & CA",1.0663012471640796],[1995,2015,1995,2015,"EE & CA",2.2751901578996057],[1995,2015,1998,2015,"EE & CA",1.2621747822919018],[1995,2015,1993,2015,"EE & CA",1.0433967424955701],[1995,2015,1992,2015,"EE & CA",1.1935142419142832]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Albania","Kazakhstan","Latvia","Lithuania","Hungary","Moldova","Georgia","North Macedonia","Poland","Romania","Czechia","Croatia","Slovakia","Russia","Kyrgyzstan","Armenia","Ukraine","Belarus","Slovenia","Bulgaria"],"legendgroup":"EE & CA","marker":{"color":"#636efa","size":[1.066412764546628,1.4957554338698364,1.0408438443102175,1.0687465327979926,1.266299001742632,1.0777513604548226,1.091927763659345,1.0441748375179856,2.090588692991161,1.5551941413441521,1.2858102656015802,1.1058153529217831,1.1393977043932897,5.137368653657179,1.1534819708108406,1.0663012471640796,2.2751901578996057,1.2621747822919018,1.0433967424955701,1.1935142419142832],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"EE & CA","orientation":"v","showlegend":true,"x":[2.6599999999999966,-3.520000000000003,2.289999999999999,2.6499999999999915,7.069999999999997,1.2900000000000063,0.30000000000000426,-4.060000000000002,6.800000000000001,5.410000000000004,0.8299999999999983,1.2100000000000009,5.779999999999998,2.5600000000000023,-3.6700000000000017,-6.210000000000001,-10.370000000000005,-2.509999999999998,1.0000000000000036,-1.4400000000000048],"xaxis":"x","y":[3.563734786740227,-3.7041143627664788,1.0680821144395622,0.6301585866712571,-2.4462476557195068,-5.579335254708681,-0.13668187553125577,2.6054240883867905,-2.328418688953132,0.11244752022263782,-0.00870041412266076,0.7517479100660793,-0.48336162778158,-5.860369776235338,-10.498295941032296,-8.48645692356168,-8.81123713831975,-3.702697429527799,-3.420709758963529,3.99383815283851],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1995,2016,"East Asia",1.068775015095492],[1995,2015,1996,2015,"East Asia",41.0],[1995,2015,1995,2016,"East Asia",1.6587312550098976]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Mongolia","China","Taiwan"],"legendgroup":"East Asia","marker":{"color":"#EF553B","size":[1.068775015095492,41.0,1.6587312550098976],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"East Asia","orientation":"v","showlegend":true,"x":[0.9299999999999997,7.759999999999991,8.579999999999998],"xaxis":"x","y":[0.6572122723626102,2.1143529859730776,0.5202174057165614],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1995,2015,"LAC",6.875013443762857],[1995,2015,1995,2016,"LAC",2.2256474983587164],[1995,2015,1996,2015,"LAC",2.33655228181494],[1995,2015,1994,2016,"LAC",4.433393986869177]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Brazil","Argentina","Colombia","Mexico"],"legendgroup":"LAC","marker":{"color":"#00cc96","size":[6.875013443762857,2.2256474983587164,2.33655228181494,4.433393986869177],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"LAC","orientation":"v","showlegend":true,"x":[-1.029999999999994,-5.919999999999995,-5.660000000000004,8.880000000000003],"xaxis":"x","y":[-6.688916526494509,-6.556278506110338,-5.694318457644968,-4.573824390798983],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1995,2015,"MENA",1.3154978351619921],[1995,2015,1995,2015,"MENA",3.7894958357779234],[1994,2015,1994,2015,"MENA",3.3320292520574304],[1997,2015,1997,2015,"MENA",1.2135702010009157],[1998,2014,1998,2014,"MENA",1.802418014408297],[1995,2015,1994,2015,"MENA",3.270451443647321]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Tunisia","Egypt","Iran","Israel","Yemen","Turkey"],"legendgroup":"MENA","marker":{"color":"#ab63fa","size":[1.3154978351619921,3.7894958357779234,3.3320292520574304,1.2135702010009157,1.802418014408297,3.270451443647321],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"MENA","orientation":"v","showlegend":true,"x":[-7.6299999999999955,3.520000000000003,-3.25,-0.9499999999999957,3.04999999999999,-2.6999999999999957],"xaxis":"x","y":[-6.177525953034042,1.7383355923546269,-2.732491212569556,0.39328956352306577,2.606246721817879,1.4995727955813614],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1994,2015,"S & SE Asia",3.001943542112826],[1995,2016,1995,2016,"S & SE Asia",1.5962699211374352],[1995,2015,1995,2015,"S & SE Asia",1.8756991184673653],[1997,2016,1997,2016,"S & SE Asia",3.6306498329273147],[1996,2015,1996,2015,"S & SE Asia",7.0410000045357775],[1994,2015,1994,2015,"S & SE Asia",3.9418866934137884],[1997,2018,1997,2018,"S & SE Asia",1.1785313188138329],[1995,2016,1995,2016,"S & SE Asia",5.515264886001998],[1995,2015,1996,2015,"S & SE Asia",8.422697847655154],[1995,2013,1993,2015,"S & SE Asia",38.96578696231604]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Thailand","Sri Lanka","Malaysia","Vietnam","Pakistan","Philippines","Laos","Bangladesh","Indonesia","India"],"legendgroup":"S & SE Asia","marker":{"color":"#FFA15A","size":[3.001943542112826,1.5962699211374352,1.8756991184673653,3.6306498329273147,7.0410000045357775,3.9418866934137884,1.1785313188138329,5.515264886001998,8.422697847655154,38.96578696231604],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"S & SE Asia","orientation":"v","showlegend":true,"x":[-5.280000000000001,3.6799999999999997,-6.809999999999995,-2.579999999999991,1.8800000000000026,-3.030000000000001,0.8999999999999986,-2.490000000000002,-2.740000000000002,16.990000000000002],"xaxis":"x","y":[-6.491701173745227,3.5914725927749167,-6.58374490694721,-1.93456964565139,1.7806420735681776,-2.139197588461247,2.1356326173274596,-1.2479001964993692,3.3374278289697017,3.061045549321026],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1995,2015,"SS Africa",3.9258233667119184],[1996,2016,1996,2016,"SS Africa",2.0597005601367533],[1993,2015,1993,2015,"SS Africa",1.0498371871696688],[1994,2014,1994,2014,"SS Africa",1.521082685257403],[1992,2013,1992,2013,"SS Africa",1.2916489068930284],[1996,2014,1996,2014,"SS Africa",1.6443900162509955],[1995,2015,1995,2015,"SS Africa",1.6611603470795062],[1994,2016,1994,2016,"SS Africa",1.0162086668126993],[1994,2015,1994,2015,"SS Africa",2.3288508063886466],[1992,2015,1998,2015,"SS Africa",1.0483430150306834],[1992,2018,1996,2015,"SS Africa",6.266536475051434],[1996,2015,1996,2015,"SS Africa",1.4501700622497768],[1994,2017,1994,2017,"SS Africa",1.0444782371527408],[1996,2014,1996,2014,"SS Africa",1.754374235773319],[1997,2012,1993,2012,"SS Africa",1.6971701827489887],[1997,2016,1997,2016,"SS Africa",1.470001809379581],[1995,2014,1995,2014,"SS Africa",1.0969549465919919],[1994,2014,1994,2014,"SS Africa",1.5615697543370473]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Ethiopia","Uganda","Botswana","Burkina Faso","Burundi","Cameroon","Cote d'Ivoire","Eswatini","Kenya","Gambia","Nigeria","Zambia","Lesotho","Mozambique","Madagascar","Malawi","Mauritania","Niger"],"legendgroup":"SS Africa","marker":{"color":"#19d3f3","size":[3.9258233667119184,2.0597005601367533,1.0498371871696688,1.521082685257403,1.2916489068930284,1.6443900162509955,1.6611603470795062,1.0162086668126993,2.3288508063886466,1.0483430150306834,6.266536475051434,1.4501700622497768,1.0444782371527408,1.754374235773319,1.6971701827489887,1.470001809379581,1.0969549465919919,1.5615697543370473],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"SS Africa","orientation":"v","showlegend":true,"x":[-12.850000000000009,3.180000000000007,-10.11999999999999,-10.689999999999998,5.480000000000004,-2.260000000000005,1.1999999999999957,-7.79999999999999,-2.4399999999999977,-9.380000000000003,-4.079999999999998,6.749999999999993,-14.839999999999996,2.6599999999999895,3.75,7.159999999999997,-4.470000000000006,-6.700000000000003],"xaxis":"x","y":[-9.58314765774243,2.8699321574225856,-9.724024727147032,-9.867615212404992,4.4397715443357555,-1.1100927137141312,-0.8523843480116184,-6.800244193475876,-1.811529390312188,-8.932048236969166,-13.805782421730179,7.050988327179063,-15.375356655602033,1.7234234439052543,-3.5531995530494314,-23.397643333454013,-3.75978546877678,-5.450981004205293],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1993,2015,"W. Europe",1.4729351989020942],[1995,2015,1995,2015,"W. Europe",2.856372586856456],[1995,2015,1995,2015,"W. Europe",1.1176143456449015],[1995,2015,1995,2015,"W. Europe",1.306612248413948],[1994,2015,1994,2015,"W. Europe",1.0],[1995,2015,1992,2015,"W. Europe",1.2214360813016873],[1995,2015,1995,2015,"W. Europe",1.2664452606372514],[1995,2015,1995,2015,"W. Europe",1.2939312519641293],[1995,2015,1995,2015,"W. Europe",1.1466717730851306],[1995,2015,1995,2015,"W. Europe",3.340137059614987],[1995,2015,1995,2015,"W. Europe",1.1409770937288262],[1995,2015,1994,2015,"W. Europe",2.8157566009262345],[1995,2015,1995,2015,"W. Europe",1.132676456423279],[1995,2015,1995,2015,"W. Europe",2.316787404917874],[1995,2014,1995,2015,"W. Europe",2.7130578200451563]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Netherlands","United Kingdom","Ireland","Belgium","Luxembourg","Switzerland","Sweden","Greece","Denmark","Germany","Finland","France","Norway","Spain","Italy"],"legendgroup":"W. Europe","marker":{"color":"#FF6692","size":[1.4729351989020942,2.856372586856456,1.1176143456449015,1.306612248413948,1.0,1.2214360813016873,1.2664452606372514,1.2939312519641293,1.1466717730851306,3.340137059614987,1.1409770937288262,2.8157566009262345,1.132676456423279,2.316787404917874,2.7130578200451563],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"W. Europe","orientation":"v","showlegend":true,"x":[1.629999999999999,1.2000000000000028,2.1100000000000065,-0.6400000000000006,-2.1599999999999966,2.8900000000000006,-0.3999999999999986,0.10999999999999943,4.739999999999998,8.380000000000003,3.0599999999999987,0.759999999999998,3.25,-0.20000000000000284,2.3900000000000006],"xaxis":"x","y":[0.22001753191144857,-1.8962532658080775,-3.2326876777460107,-0.6187014831828783,3.2059340503022185,-1.1115681856701016,2.843226473401309,-1.0872684744242207,4.026614499054922,1.8372220669762704,1.8564236795102502,1.0331805238444147,0.5935287638660185,-1.2270915877124793,-0.3939090758790691],"yaxis":"y","type":"scatter"},{"customdata":[[1995,2015,1994,2015,"W. Offshoots",2.0095913555411666],[1995,2015,1995,2015,"W. Offshoots",10.303787297630485],[1995,2015,1995,2016,"W. Offshoots",1.6675775350389128]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1995 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2015 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1995 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2015 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Canada","United States","Australia"],"legendgroup":"W. Offshoots","marker":{"color":"#B6E880","size":[2.0095913555411666,10.303787297630485,1.6675775350389128],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"W. Offshoots","orientation":"v","showlegend":true,"x":[4.780000000000001,5.609999999999992,4.679999999999996],"xaxis":"x","y":[1.853272566038612,0.8111628916354405,1.2065913366724708],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"change WID: Top 10pc share \u2013 pretax"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"change PIP: Top 10pc share"}},"legend":{"title":{"text":"region"},"tracegroupgap":0,"itemsizing":"constant"},"title":{"text":"Change in WID: Top 10pc share \u2013 pretax vs PIP: Top 10pc share (1995-2015 +/- 3)"},"height":600,"shapes":[{"line":{"color":"#808080"},"opacity":0.5,"type":"line","x0":-23.397643333454013,"x1":16.990000000000002,"xref":"x","y0":-23.397643333454013,"y1":16.990000000000002,"yref":"y"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('9a6170a1-2d4b-407f-9793-408c9feb3a6b');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df_change <span class="op">=</span> plot_change_scatter(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> <span class="st">'diff'</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">1</span>]</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>df_change[<span class="st">'change_diff'</span>] <span class="op">=</span> df_change[<span class="ss">f'change </span><span class="sc">{</span>selected_vars[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>] <span class="op">-</span> df_change[<span class="ss">f'change </span><span class="sc">{</span>selected_vars[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>] </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>df_change.to_csv(<span class="st">'df_change.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="incremental">
<ul class="incremental">
<li>More countries below than above the line</li>
<li>For the <em>majority</em> of countries the gap is not huge (28/79 &gt; 2 pt.&nbsp;difference; 20/79 &gt; 4 pt.&nbsp;difference)</li>
<li><em>Very</em> large differences in a small number of coutries – which happen to be very populous</li>
</ul>
</div>
</section>
<section id="top-1-vs-top-10" class="level2">
<h2 class="anchored" data-anchor-id="top-1-vs-top-10">Top 1 vs Top 10?</h2>
</section>
<section id="section-24" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-24"></h2>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set-up to compare WID top 1% and top 10% share, all countries</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1995</span>, <span class="dv">2015</span>]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 1pc share – pretax'</span>,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2015 (+/- 3 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table WID top 1% and top 10% share, all countries</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table_top_1_top10.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70004]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x114b7b220). One of the two will be used. Which one is undefined.
[0307/105559.381194:INFO:headless_shell.cc(107)] 104325 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmplg4o4jy_/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table_top_1_top10.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Differences for some individual countries – LAC</li>
<li>But for other regions, and globally, the story over time is very similar.</li>
</ul>
</div>
</section>
</section>
<section id="vs-2018" class="level1">
<h1>1980 vs 2018</h1>
<section id="section-25" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-25"></h2>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">2018</span>]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1980 vs 2018 (+/- 5 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table8.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70016]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x1130a2220). One of the two will be used. Which one is undefined.
[0307/105600.225282:INFO:headless_shell.cc(107)] 106783 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpg0v576xv/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table8.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Even before aligning coverage, the country coverage drops substantially for both datasets - so too does population coverage</li>
<li>In WID a substantial rise in the unweighted average; none in PIP</li>
<li>A huge rise in weighted average in WID; small rise in PIP</li>
<li>PIP is the binding constraint on coverage: almost no EE &amp; CA coverage; half the number of W. European countries.</li>
</ul>
</div>
</section>
<section id="section-26" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-26"></h2>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">2018</span>]</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">True</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1980 vs 2018 (+/- 5 years) – Matched countries only</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table9.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70026]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x115812220). One of the two will be used. Which one is undefined.
[0307/105601.060908:INFO:headless_shell.cc(107)] 105862 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpbqegg5gn/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table9.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Very few countries available in both datasets for this period (though population coverage falls less)</li>
<li>Aligning coverage does bring the datasets somewhat closer:
<ul class="incremental">
<li>smaller rise in global unweighted average in WID</li>
<li>more balanced split between rise and fall</li>
</ul></li>
<li>But the stark difference remains: a huge rise in weighted average in WID</li>
</ul>
</div>
</section>
<section id="section-27" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="section-27"></h2>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>plot_change_scatter(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> <span class="st">'diff'</span>,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="45d766bc-e60d-47ef-b3ea-18d4d98eef86" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("45d766bc-e60d-47ef-b3ea-18d4d98eef86")) {                    Plotly.newPlot(                        "45d766bc-e60d-47ef-b3ea-18d4d98eef86",                        [{"customdata":[[1980,2018,1985,2018,"EE & CA",2.070655106818574]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Poland"],"legendgroup":"EE & CA","marker":{"color":"#636efa","size":[2.070655106818574],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"EE & CA","orientation":"v","showlegend":true,"x":[15.000000000000004],"xaxis":"x","y":[3.15021771014656],"yaxis":"y","type":"scatter"},{"customdata":[[1980,2017,1981,2016,"East Asia",1.65284557818415],[1980,2016,1981,2018,"East Asia",41.0]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Taiwan","China"],"legendgroup":"East Asia","marker":{"color":"#EF553B","size":[1.65284557818415,41.0],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"East Asia","orientation":"v","showlegend":true,"x":[13.200000000000003,13.909999999999997],"xaxis":"x","y":[0.8382972857133133,7.69913818860692],"yaxis":"y","type":"scatter"},{"customdata":[[1980,2018,1980,2018,"LAC",2.2370451687243857],[1980,2018,1981,2018,"LAC",6.9178076930745],[1980,2018,1980,2018,"LAC",2.3743839084312013],[1980,2018,1984,2018,"LAC",4.484907772150422]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Argentina","Brazil","Colombia","Mexico"],"legendgroup":"LAC","marker":{"color":"#00cc96","size":[2.2370451687243857,6.9178076930745,2.3743839084312013,4.484907772150422],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"LAC","orientation":"v","showlegend":true,"x":[-2.309999999999995,-2.8399999999999963,-4.739999999999995,11.38000000000001],"xaxis":"x","y":[-0.34516193953727026,-3.4280598370975923,-7.78428580813646,-0.8132940702079452],"yaxis":"y","type":"scatter"},{"customdata":[[1985,2015,1985,2015,"MENA",1.3198144062536905],[1984,2013,1984,2013,"MENA",1.9974036146071938],[1979,2016,1979,2018,"MENA",1.2216386930158187]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Tunisia","Morocco","Israel"],"legendgroup":"MENA","marker":{"color":"#ab63fa","size":[1.3198144062536905,1.9974036146071938,1.2216386930158187],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"MENA","orientation":"v","showlegend":true,"x":[-10.179999999999993,-0.8900000000000006,-0.13000000000000256],"xaxis":"x","y":[-8.512386589503027,0.04140744870401747,0.7176509334162091],"yaxis":"y","type":"scatter"},{"customdata":[[1981,2018,1981,2018,"S & SE Asia",2.9914381578117277],[1985,2016,1985,2016,"S & SE Asia",1.5922587152243994],[1985,2018,1985,2018,"S & SE Asia",4.048749591164326],[1984,2015,1984,2015,"S & SE Asia",1.89776812292084],[1980,2013,1977,2018,"S & SE Asia",39.64264082514575],[1980,2017,1984,2018,"S & SE Asia",8.52463584044274],[1983,2016,1983,2016,"S & SE Asia",5.6051665985250345]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Thailand","Sri Lanka","Philippines","Malaysia","India","Indonesia","Bangladesh"],"legendgroup":"S & SE Asia","marker":{"color":"#FFA15A","size":[2.9914381578117277,1.5922587152243994,4.048749591164326,1.89776812292084,39.64264082514575,8.52463584044274,5.6051665985250345],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"S & SE Asia","orientation":"v","showlegend":true,"x":[-6.479999999999997,6.75,-4.020000000000003,-7.209999999999994,23.910000000000004,0.4899999999999949,5.869999999999997],"xaxis":"x","y":[-7.3590766657934275,6.146262111256007,-2.923559847739977,-7.176949897549804,0.871182754611354,2.940934217384079,4.969442191042436],"yaxis":"y","type":"scatter"},{"customdata":[[1981,2015,1981,2015,"SS Africa",4.121059582331611],[1985,2018,1985,2018,"SS Africa",6.585176673207473],[1984,2016,1984,2016,"SS Africa",1.3367233018797433],[1985,2015,1985,2015,"SS Africa",1.052059049228531],[1985,2015,1985,2018,"SS Africa",1.702767273197792]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Ethiopia","Nigeria","Rwanda","Botswana","Cote d'Ivoire"],"legendgroup":"SS Africa","marker":{"color":"#19d3f3","size":[4.121059582331611,6.585176673207473,1.3367233018797433,1.052059049228531,1.702767273197792],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"SS Africa","orientation":"v","showlegend":true,"x":[0.5,-1.3999999999999986,13.809999999999995,-1.4399999999999977,-6.009999999999998],"xaxis":"x","y":[0.9482408675421503,-1.463738840353436,11.049828186498722,-1.454835117500032,-6.611641995289919],"yaxis":"y","type":"scatter"},{"customdata":[[1980,2018,1978,2018,"W. Europe",2.7979984941631173],[1980,2017,1983,2018,"W. Europe",1.4709798823197118],[1980,2017,1979,2018,"W. Europe",1.1328493837234632],[1985,2017,1985,2018,"W. Europe",1.3061340628582696],[1985,2017,1985,2018,"W. Europe",1.0],[1980,2017,1980,2018,"W. Europe",2.304211186760654],[1980,2017,1981,2018,"W. Europe",1.2698098004102505],[1980,2017,1982,2018,"W. Europe",1.2232749958502227],[1980,2017,1979,2017,"W. Europe",2.85885956153613]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["France","Netherlands","Norway","Belgium","Luxembourg","Spain","Sweden","Switzerland","United Kingdom"],"legendgroup":"W. Europe","marker":{"color":"#FF6692","size":[2.7979984941631173,1.4709798823197118,1.1328493837234632,1.3061340628582696,1.0,2.304211186760654,1.2698098004102505,1.2232749958502227,2.85885956153613],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"W. Europe","orientation":"v","showlegend":true,"x":[0.8200000000000003,2.570000000000004,3.66,0.629999999999999,1.8999999999999986,0.14000000000000057,4.670000000000002,1.6499999999999986,7.640000000000004],"xaxis":"x","y":[-0.4585097777827798,0.36213125707906,0.3583439563284614,1.6017781489405287,5.090487137717279,-0.939990143807961,4.621290704586908,-2.7736417299905725,4.29007829163865],"yaxis":"y","type":"scatter"},{"customdata":[[1980,2018,1981,2017,"W. Offshoots",2.0286856221833687],[1980,2018,1981,2018,"W. Offshoots",1.6882307116962838],[1980,2018,1979,2018,"W. Offshoots",10.362262435480774]],"hovertemplate":"<b>%{hovertext}</b><br><br>change WID: Top 10pc share \u2013 pretax=%{x:.1f}<br>change PIP: Top 10pc share=%{y:.1f}<br>Year1980 WID: Top 10pc share \u2013 pretax=%{customdata[0]:.0f}<br>Year2018 WID: Top 10pc share \u2013 pretax=%{customdata[1]:.0f}<br>Year1980 PIP: Top 10pc share=%{customdata[2]:.0f}<br>Year2018 PIP: Top 10pc share=%{customdata[3]:.0f}<extra></extra>","hovertext":["Canada","Australia","United States"],"legendgroup":"W. Offshoots","marker":{"color":"#B6E880","size":[2.0286856221833687,1.6882307116962838,10.362262435480774],"sizemode":"area","sizeref":0.04555555555555556,"symbol":"circle"},"mode":"markers","name":"W. Offshoots","orientation":"v","showlegend":true,"x":[2.9000000000000057,8.09,11.979999999999997],"xaxis":"x","y":[1.0501542207341181,3.3117545365180376,5.4808109132649],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"change WID: Top 10pc share \u2013 pretax"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"change PIP: Top 10pc share"}},"legend":{"title":{"text":"region"},"tracegroupgap":0,"itemsizing":"constant"},"title":{"text":"Change in WID: Top 10pc share \u2013 pretax vs PIP: Top 10pc share (1980-2018 +/- 5)"},"height":600,"shapes":[{"line":{"color":"#808080"},"opacity":0.5,"type":"line","x0":-10.179999999999993,"x1":23.910000000000004,"xref":"x","y0":-10.179999999999993,"y1":23.910000000000004,"yref":"y"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('45d766bc-e60d-47ef-b3ea-18d4d98eef86');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<ul>
<li>For those countries with data from both PIP and WID, the majority tell a surprisingly similar story about change over time.</li>
<li>Only for a small number are there <em>very</em> large differences – this includes a number of populous countries: India, China, US, Mexico</li>
</ul>
</section>
<section id="top-1-vs-top-10-1" class="level2">
<h2 class="anchored" data-anchor-id="top-1-vs-top-10-1">Top 1 vs Top 10?</h2>
</section>
<section id="section-28" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-28"></h2>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set-up to compare WID top 1% and top 10% share, all countries</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 1pc share – pretax'</span>,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1980 vs 2018 (+/- 5 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table WID top 1% and top 10% share, all countries</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table_top_1_top10_1980.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70038]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x11311c220). One of the two will be used. Which one is undefined.
[0307/105601.973066:INFO:headless_shell.cc(107)] 101418 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmp2c1kdkaf/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table_top_1_top10_1980.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Much more divergence visible than for 1995-2015 period – especially population-weighted</li>
<li>Average top 1% doubled, or nearly, in S &amp; SE Asia, East Asia and W. Offshoots. EE &amp; CA quadrupled.</li>
</ul>
</div>
</section>
<section id="section-29" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-29"></h2>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set-up to compare WID top 1% and top 10% share, all countries</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">True</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 1pc share – pretax'</span>,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1980 vs 2018 (+/- 5 years) – Matched countries only</code></pre>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Table WID top 1% and PIP top 10% share, all countries</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table_WID_top_1_PIP_top10_1980.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70048]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x112eb9220). One of the two will be used. Which one is undefined.
[0307/105602.790449:INFO:headless_shell.cc(107)] 102369 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpq91xjz0m/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table_WID_top_1_PIP_top10_1980.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>This remains true even after aligning coverage with PIP.</li>
</ul>
</div>
</section>
</section>
<section id="welfare-concept-methods" class="level1">
<h1>Welfare concept &amp; methods</h1>
<section id="lis-pre--and-post-tax-data" class="level2">
<h2 class="anchored" data-anchor-id="lis-pre--and-post-tax-data">LIS pre- and post-tax data</h2>
</section>
<section id="section-30" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-30"></h2>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">2018</span>]</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">True</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'LIS: Top 10pc share – percap_disposable'</span>,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'LIS: Top 10pc share – percap_market'</span>,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1980 vs 2018 (+/- 5 years) – Matched countries only</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/LIS_on_LIS.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70058]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x112935220). One of the two will be used. Which one is undefined.
[0307/105603.593810:INFO:headless_shell.cc(107)] 81597 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpbsfx30io/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/LIS_on_LIS.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Very low coverage</li>
<li>For W. Europe and W. Offshoots we do see some divergence between pre- and post- tax inequality.</li>
</ul>
</div>
</section>
<section id="wid-pre--vs-post-tax-data" class="level2">
<h2 class="anchored" data-anchor-id="wid-pre--vs-post-tax-data">WID pre- vs post-tax data</h2>
</section>
<section id="section-31" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-31"></h2>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">2018</span>]</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">True</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – posttax_nat'</span>,</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1980 vs 2018 (+/- 5 years) – Matched countries only</code></pre>
</div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/WID_on_WID.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70068]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x1137b5220). One of the two will be used. Which one is undefined.
[0307/105604.391790:INFO:headless_shell.cc(107)] 79199 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmp7avxquta/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/WID_on_WID.png" class="img-fluid"></p>
<div class="incremental">
<ul class="incremental">
<li>Again very low coverage</li>
<li>For both EE &amp; CA and W. Europe, quite a similar story in pre- and post-tax trends – albeit huge rises within EE &amp; CA.</li>
</ul>
</div>
</section>
<section id="individual-countries" class="level2">
<h2 class="anchored" data-anchor-id="individual-countries">Individual countries</h2>
</section>
<section id="section-32" class="level2">
<h2 class="anchored" data-anchor-id="section-32"></h2>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_one_country_comparison(selected_entity, selected_vars):</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    selected_source_var_dict <span class="op">=</span> prep_selected_vars(selected_vars)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    df_long <span class="op">=</span> pd.DataFrame()</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(selected_source_var_dict[<span class="st">'sources'</span>])):</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>        source <span class="op">=</span> selected_source_var_dict[<span class="st">"sources"</span>][i]</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>        var <span class="op">=</span> selected_source_var_dict[<span class="st">"var_names"</span>][i]</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> source_dfs[source]</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> source <span class="op">==</span> <span class="st">"PIP"</span>:</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>            df1 <span class="op">=</span> df.loc[df[<span class="st">'welfare_type'</span>] <span class="op">==</span> <span class="st">"income"</span>, [<span class="st">'Year'</span>, <span class="st">'Entity'</span>, var]]<span class="op">\</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>                .rename(columns <span class="op">=</span> {var: <span class="st">'value'</span>})</span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>            df1[<span class="st">'data'</span>] <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>source<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> (income)'</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>            df_long <span class="op">=</span> pd.concat([df_long, df1])</span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>            df2 <span class="op">=</span> df.loc[df[<span class="st">'welfare_type'</span>] <span class="op">==</span> <span class="st">"consumption"</span>, [<span class="st">'Year'</span>, <span class="st">'Entity'</span>, var, <span class="st">'welfare_type'</span>]]<span class="op">\</span></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>                .rename(columns <span class="op">=</span> {var: <span class="st">'value'</span>})</span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>            df2[<span class="st">'data'</span>] <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>source<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>var<span class="sc">}</span><span class="ss"> (consumption)'</span></span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a>            df_long <span class="op">=</span> pd.concat([df_long, df2])</span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> df[[<span class="st">'Year'</span>, <span class="st">'Entity'</span>, var]]<span class="op">\</span></span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a>                .rename(columns <span class="op">=</span> {var: <span class="st">'value'</span>})</span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'data'</span>] <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>source<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a>            df_long <span class="op">=</span> pd.concat([df_long, df])</span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a>    df_plot <span class="op">=</span> df_long[df_long[<span class="st">'Entity'</span>]<span class="op">==</span>selected_entity]</span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> px.line(df_plot, x<span class="op">=</span><span class="st">"Year"</span>, y<span class="op">=</span><span class="st">"value"</span>, color<span class="op">=</span><span class="st">'data'</span>,</span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="ss">f'A range of series for </span><span class="sc">{</span>selected_entity<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(showlegend<span class="op">=</span><span class="va">True</span>, legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a>    title_font_family<span class="op">=</span><span class="st">'Lato'</span>,</span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a>    font<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="dv">8</span></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a>    fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-33" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-33"></h2>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – posttax_nat'</span>,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span>,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'LIS: Top 10pc share – percap_disposable'</span>,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'LIS: Top 10pc share – percap_market'</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"United States"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="17fbc686-e2c1-4fd5-a699-0b9c7c18392c" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("17fbc686-e2c1-4fd5-a699-0b9c7c18392c")) {                    Plotly.newPlot(                        "17fbc686-e2c1-4fd5-a699-0b9c7c18392c",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"xaxis":"x","y":[42.0,45.0,37.7,39.8,43.120000000000005,43.120000000000005,43.74,43.02,44.43,44.98,43.98,45.9,44.14,47.38,46.09,43.69,45.71,47.21,47.59,47.07,48.23,46.96,46.3,46.34,48.3,47.98,49.06,48.1,48.35,47.46,47.1,48.58,48.94,46.98,42.32,38.86,36.06,35.29,36.95,36.88,38.87,38.34,39.06,37.92,36.64,35.67,35.980000000000004,36.73,35.72,35.67,35.510000000000005,35.96,35.5,35.61,36.15,36.59,36.99,36.65,36.34,35.260000000000005,35.5,34.1,33.54,34.09,34.410000000000004,34.62,33.56,33.96,33.879999999999995,34.29,34.01,34.300000000000004,33.85,34.32,34.61,35.34,36.49,36.58,36.34,37.46,39.25,38.79,38.76,38.33,39.43,39.09,39.15,39.900000000000006,40.8,41.52,41.91,42.28,42.75,41.95,41.510000000000005,41.64,42.43,43.580000000000005,44.3,44.02,43.55,42.45,43.87,44.26,45.57,44.91,45.59,45.51,45.32,45.46,45.83,45.69,44.41,45.6],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"xaxis":"x","y":[null,null,null,null,null,41.42,41.79,40.91,42.64,44.04,42.09,43.15,41.04,44.53,43.33,40.41,42.66,44.13,44.440000000000005,43.97,45.22,43.59,42.81,43.43,45.29,44.47,46.39,45.11,45.03,43.57,43.36,45.63,45.35,41.49,35.5,30.84,29.25,28.6,31.57,31.11,33.22,33.27,32.879999999999995,31.31,30.680000000000003,29.85,30.54,31.1,30.320000000000004,30.41,30.6,30.78,30.41,30.67,31.78,32.26,32.7,32.35,32.029999999999994,30.64,30.48,29.270000000000003,28.910000000000004,29.29,29.54,30.09,28.9,29.3,29.0,29.39,29.57,29.86,29.25,30.31,30.83,31.69,33.22,33.29,32.690000000000005,33.39,35.36,34.74,34.599999999999994,33.92,34.63,33.95,33.85,34.4,35.13,35.7,35.86,36.120000000000005,36.56,36.16,36.120000000000005,36.29,36.73,37.34,37.71,37.13,36.49,36.01,37.25,37.66,38.940000000000005,38.04,38.5,38.16,38.11,38.37,39.16,38.98,37.09,37.3],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (income)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (income)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (income)","orientation":"v","showlegend":true,"x":[1974,1979,1986,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[26.02059284157296,25.26881603817394,26.722865635583283,27.495397758453148,27.713954298807693,29.68183624153485,29.59746892741949,29.684254677274208,30.028357350762708,30.36322709341897,29.74125614527887,29.87104985140604,30.25037476067648,30.62178407084773,30.08410799862223,30.212018939995826,30.091142959702687,30.77717728785131,31.153942299729543,30.39644565168999,30.3048108773669,30.36142038853464,29.26024911457505,30.17942307195015,30.23564262401984,30.01309234260327,30.652413445667698,30.495417568909648,30.42036870306124,30.258825973341843,30.74962695143884,30.77204637261224],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_disposable<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_disposable","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_disposable","orientation":"v","showlegend":true,"x":[1974,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[26.1275,25.8759,25.7333,26.3088,26.9907,27.1608,27.3158,27.4681,27.3842,26.5948,27.1834,27.7921,27.6971,27.5508,27.7689,29.7137,29.6169,29.6468,30.0009,30.3901,29.7758,29.9143,30.2525,30.6284,30.1297,30.2632,30.1413,30.8149,31.2314,30.4944,30.3346,30.4122,29.3028,30.2158,30.2778,30.0497,30.6898,30.5267,30.4586,30.3005,30.7892,30.8091,29.5345],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_market<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_market","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_market","orientation":"v","showlegend":true,"x":[1974,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[30.4714,30.6762,30.8084,31.4709,32.1919,32.3219,32.1465,32.5088,32.6303,32.3336,32.6872,33.3824,33.2165,33.0583,33.4522,35.6476,35.722,35.756,36.0432,36.3466,35.8417,36.1844,36.2433,36.5967,35.9971,35.9521,36.1856,36.5691,36.5378,35.7826,36.1929,37.0357,36.4995,37.6242,37.4703,37.0564,37.0832,37.0625,37.3056,37.0955,37.5711,37.2996,37.9545],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for United States"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('17fbc686-e2c1-4fd5-a699-0b9c7c18392c');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>In the US, similar trends across survey and WID 1975-1995</li>
<li>Some divergence thereafter between pre- and post-tax series - also in LIS survey data</li>
<li>Very strong divergence of WID series (both pre- and post-tax) 1995 onwards.</li>
</ul>
</div>
</section>
<section id="section-34" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="section-34"></h2>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"Russia"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="1c09529f-e529-4a4a-be0b-5d0ae60b7f87" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("1c09529f-e529-4a4a-be0b-5d0ae60b7f87")) {                    Plotly.newPlot(                        "1c09529f-e529-4a4a-be0b-5d0ae60b7f87",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1905,1910,1920,1928,1930,1934,1940,1950,1956,1959,1960,1961,1964,1966,1968,1970,1972,1976,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017],"xaxis":"x","y":[44.07,44.54,45.48,46.88,47.83,46.88,23.5,23.28,23.5,25.66,25.7,26.6,26.290000000000003,26.91,26.700000000000003,26.37,25.36,23.95,22.33,24.6,22.55,22.24,21.68,22.040000000000003,22.38,22.69,22.98,23.24,23.27,23.3,23.33,24.68,23.95,25.01,32.45,34.21,40.29,42.3,48.32,45.33,43.44,46.52,49.17,49.86,48.05,48.07,47.8,47.16,49.04,48.67,51.6,49.23,45.21,47.74,45.18,47.0,45.02,44.86,45.3,45.09],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1905,1910,1920,1928,1930,1934,1940,1950,1956,1959,1960,1961,1964,1966,1968,1970,1972,1976,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017],"xaxis":"x","y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (income)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (income)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (income)","orientation":"v","showlegend":true,"x":[2014,2015,2016,2017,2018],"xaxis":"x","y":[27.5827132886668,26.82981119533928,27.06549911170233,26.237661071337985,26.32257034862941],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (consumption)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (consumption)","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (consumption)","orientation":"v","showlegend":true,"x":[1993,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[38.28529900872466,35.5517381529143,29.39174103944983,28.620346177898632,27.73528437729345,27.62380426062727,27.857023929217466,28.1454970797213,30.31960819379792,30.49040179440244,31.37008022044573,31.27844810097424,32.769647690855344,32.487035795410954,31.082245356088727,30.612864621047457,31.10608832325007,32.16839253425659,32.44865119819671,31.87125176496206,29.69136837667896,28.614990791875627,29.217902653564742,29.88296474748646,30.16583262422748,29.02429483958634],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_disposable<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_disposable","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_disposable","orientation":"v","showlegend":true,"x":[2000,2004,2007,2010,2011,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[32.6661,28.2471,25.1718,24.9621,28.0325,27.6756,27.0667,26.3669,26.5753,25.9549,26.0889,26.6744],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_market<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_market","line":{"color":"#19d3f3","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_market","orientation":"v","showlegend":true,"x":[2000,2004,2007,2010,2011,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[38.3079,33.5294,29.9493,30.6902,32.8229,32.2053,32.2102,31.2215,31.8706,31.1845,31.2595,31.7547],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for Russia"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('1c09529f-e529-4a4a-be0b-5d0ae60b7f87');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>In Russia, huge uncertainty concerning the extent and duration of rising inequality over transition.</li>
<li>Quality of the data subject to a lot of discussion <span class="citation" data-cites="Milanovic1998-sy Novokmet2018-px Atkinson-Micklewright1992-qr">(<a href="#ref-Milanovic1998-sy" role="doc-biblioref">Milanovic 1998</a>; <a href="#ref-Novokmet2018-px" role="doc-biblioref">Novokmet, Piketty, and Zucman 2018</a>; <a href="#ref-Atkinson-Micklewright1992-qr" role="doc-biblioref">Anthony Barnes Atkinson, Micklewright, and Micklewright 1992</a>)</span></li>
<li>More agreement from mid-2000s</li>
</ul>
</div>
</section>
<section id="section-35" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-35"></h2>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"Mexico"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="562fca5f-1ca7-473c-8a80-f1e0a80c8e83" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("562fca5f-1ca7-473c-8a80-f1e0a80c8e83")) {                    Plotly.newPlot(                        "562fca5f-1ca7-473c-8a80-f1e0a80c8e83",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1930,1940,1950,1960,1970,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[52.92,53.48,54.03,54.59,55.7,55.7,56.49999999999999,57.47,55.83,52.73,53.400000000000006,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,54.22,56.48,58.75,58.81999999999999,58.9,61.94,64.97,63.71,62.45,63.29,64.14,63.78,63.42,63.1,62.79,64.19,65.60000000000001,64.94],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1930,1940,1950,1960,1970,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,54.56999999999999,56.7,56.69,56.68,59.72,62.78,61.4,60.03,60.81999999999999,61.6,61.17,60.74,60.55,60.35,61.8,63.24,62.760000000000005],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (income)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (income)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (income)","orientation":"v","showlegend":true,"x":[1984,1989,1992,1994,1996,1998,2000,2002,2004,2005,2006,2008,2010,2012,2014,2016,2018,2020],"xaxis":"x","y":[37.872417952618434,40.588240802576095,42.22909047034865,42.34742445707325,42.13685953997121,40.43297204313322,42.04099260771163,39.64966693754299,39.63576238341895,39.581995070050965,38.91815194168322,39.11430447220184,37.093273501069326,38.859201617810726,39.5491378765413,37.77360006627427,37.05912388241049,35.45843100105394],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_disposable<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_disposable","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_disposable","orientation":"v","showlegend":true,"x":[1984,1989,1992,1994,1996,1998,2000,2002,2004,2005,2006,2008,2010,2012,2014,2016,2018],"xaxis":"x","y":[35.9073,40.2009,42.647,43.4285,41.4796,42.2971,41.8867,40.0418,39.4891,39.6078,39.2662,39.4666,37.8841,39.7064,40.1431,36.9989,36.3917],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_market<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_market","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_market","orientation":"v","showlegend":true,"x":[1984,1989,1992,1994,1996,1998,2000,2002,2004,2005,2006,2008,2010,2012,2014,2016,2018],"xaxis":"x","y":[35.9432,40.526,42.8481,44.171,42.0962,42.7612,41.9276,40.7055,40.4089,40.4321,39.7371,40.1267,38.7668,40.3555,41.3036,38.0961,37.377],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for Mexico"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('562fca5f-1ca7-473c-8a80-f1e0a80c8e83');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li><p>In Mexico (and other LAC countries) WID is using a linear interpolation between decadal estimates prior to ~2000.</p></li>
<li><p>This relates to methods (tax data, top adjustments) rather than income concept.</p></li>
</ul>
</div>
</section>
<section id="section-36" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-36"></h2>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"Brazil"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="30cc0509-b0e6-45a3-a89c-eb105f69cdd3" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("30cc0509-b0e6-45a3-a89c-eb105f69cdd3")) {                    Plotly.newPlot(                        "30cc0509-b0e6-45a3-a89c-eb105f69cdd3",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1930,1940,1950,1960,1970,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[58.16,58.78,59.39,60.0,61.23,61.23,62.82,64.94,62.82,60.16,61.760000000000005,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.91,60.48,60.940000000000005,60.21,60.61,60.23,58.650000000000006,59.09,58.7,59.48,60.25,59.38,58.39,58.7,59.88,58.93000000000001,58.43000000000001,58.07,57.07],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1930,1940,1950,1960,1970,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,59.66,60.07,59.3,59.25,58.34,56.59,57.52,56.71000000000001,57.6,58.49,57.41,56.15,56.16,57.35,56.05,55.47,55.27,53.93],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (income)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (income)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (income)","orientation":"v","showlegend":true,"x":[1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1992,1993,1995,1996,1997,1998,1999,2001,2002,2003,2004,2005,2006,2007,2008,2009,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"xaxis":"x","y":[45.8805795161211,46.23349327589745,46.79312158612378,46.5301917279701,42.54930146392798,46.56882028968518,47.38407454097633,49.19049325683929,51.14934587838509,48.07811422090076,39.68669813581674,48.45445095791511,47.543864784350845,47.35135379640933,47.39163612548048,47.59190963971516,47.00050782192533,46.0961101645203,46.1341306488762,45.41353420704236,44.53827407219125,44.63486189537466,44.056857811281006,43.19421570903878,42.49895192254377,42.18398079617266,41.710869220442056,42.38646095273584,41.73824183282998,41.049114066806005,40.854948257856336,42.02827437760479,41.98302717217105,42.45251967902351,41.92336596468797,39.44602162324833],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_disposable<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_disposable","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_disposable","orientation":"v","showlegend":true,"x":[2006,2009,2011,2013,2016],"xaxis":"x","y":[41.6866,39.4078,38.6158,38.0349,38.7067],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_market<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_market","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_market","orientation":"v","showlegend":true,"x":[2006,2009,2011,2013,2016],"xaxis":"x","y":[47.8615,45.3485,44.8862,44.661,45.4501],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for Brazil"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('30cc0509-b0e6-45a3-a89c-eb105f69cdd3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>Similar in Brazil, except WID goes with the survey data after 2000.</li>
</ul>
</div>
</section>
<section id="section-37" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="section-37"></h2>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"India"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="2efd69a4-203d-479a-99e0-3e3a72565267" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("2efd69a4-203d-479a-99e0-3e3a72565267")) {                    Plotly.newPlot(                        "2efd69a4-203d-479a-99e0-3e3a72565267",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1943,1944,1945,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013],"xaxis":"x","y":[48.0,50.0,54.6,53.76,44.8,53.290000000000006,null,null,null,null,null,null,null,null,47.77,null,null,null,null,null,null,null,null,null,50.67,null,null,null,null,null,null,null,35.17,37.42,36.92,36.84,38.77,40.2,40.150000000000006,39.61,39.7,38.66,37.95,38.080000000000005,37.89,35.56,36.52,36.9,37.25,36.76,36.16,37.17,37.54,35.43,35.11,34.99,35.02,35.120000000000005,35.32,35.099999999999994,34.599999999999994,33.129999999999995,32.36,31.55,30.87,36.15,34.239999999999995,35.68,35.97,35.370000000000005,36.3,36.34,34.4,35.02,35.99,37.67,39.22,39.28,38.940000000000005,39.75,40.25,40.52,40.9,41.99,43.1,44.23,45.38,46.55,47.82,49.13,50.46000000000001,51.83,53.21,55.17,56.03,56.27],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1943,1944,1945,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013],"xaxis":"x","y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (consumption)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (consumption)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (consumption)","orientation":"v","showlegend":true,"x":[1977,1983,1987,1993,2004,2009,2011,2015,2016,2017,2018,2019],"xaxis":"x","y":[27.50758994209084,26.41488695813174,27.534790576704182,26.66824100980147,29.1505008506603,29.962316295082186,30.142651356925672,29.729286559122496,29.71173535603338,30.49848688442573,28.378772696702192,30.62390803334367],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_disposable<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_disposable","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_disposable","orientation":"v","showlegend":true,"x":[2004,2011],"xaxis":"x","y":[38.7741,39.7673],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_market<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_market","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_market","orientation":"v","showlegend":true,"x":[2004,2011],"xaxis":"x","y":[39.1846,40.6813],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for India"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('2efd69a4-203d-479a-99e0-3e3a72565267');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>In India, only two survey available in LIS.</li>
<li>Some divergence between pre- and post- tax inequality in the LIS data, but tiny compared to the divergence of WID pre-tax.</li>
<li>Note PIP data relates to <em>consumption</em></li>
<li>A period of particular divergence between national accounts and survey data <span class="citation" data-cites="Deaton2005-oy Sandefur2022-lx">(<a href="#ref-Deaton2005-oy" role="doc-biblioref">Deaton 2005</a>; <a href="#ref-Sandefur2022-lx" role="doc-biblioref">Sandefur 2022</a>)</span></li>
</ul>
</div>
</section>
<section id="section-38" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-38"></h2>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"China"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="fc0a1634-b5a6-40a3-a09f-086f74ee54d1" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("fc0a1634-b5a6-40a3-a09f-086f74ee54d1")) {                    Plotly.newPlot(                        "fc0a1634-b5a6-40a3-a09f-086f74ee54d1",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1930,1940,1950,1960,1970,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"xaxis":"x","y":[46.03,47.27,50.03999999999999,50.32,61.07,55.03,52.77,48.32,26.700000000000003,26.700000000000003,26.700000000000003,27.81,27.81,27.89,28.31,28.71,28.8,29.28,30.14,30.39,30.22,30.56,31.11,30.85,31.51,32.71,33.910000000000004,34.33,33.900000000000006,33.900000000000006,33.910000000000004,34.25,34.79,35.870000000000005,36.620000000000005,39.68,40.510000000000005,41.21,42.16,42.370000000000005,42.69,42.69,42.63,42.83,43.11,41.69,42.35,41.55,41.66,41.8],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1820,1850,1880,1900,1910,1920,1930,1940,1950,1960,1970,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"xaxis":"x","y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (income)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (income)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (income)","orientation":"v","showlegend":true,"x":[1981,1984,1987],"xaxis":"x","y":[21.73496970984172,21.303040046684497,22.43456527291909],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (consumption)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (consumption)","line":{"color":"#ab63fa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (consumption)","orientation":"v","showlegend":true,"x":[1990,1993,1996,1999,2002,2005,2008,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"xaxis":"x","y":[25.79524155479387,26.622990823418817,27.29834543870071,29.38699711280392,31.43083138056168,30.8615602981931,31.965973158693373,32.6325294096877,31.818484023813298,31.54291418964979,30.281720510371628,29.69338778103814,29.41269842467379,29.35065032790432,29.86473498254719,29.43410789844864,29.4963511761464],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_disposable<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_disposable","line":{"color":"#FFA15A","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_disposable","orientation":"v","showlegend":true,"x":[2002,2013,2018],"xaxis":"x","y":[32.1577,30.4715,31.2815],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=LIS: Top 10pc share \u2013 percap_market<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"LIS: Top 10pc share \u2013 percap_market","line":{"color":"#19d3f3","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"LIS: Top 10pc share \u2013 percap_market","orientation":"v","showlegend":true,"x":[2002,2013,2018],"xaxis":"x","y":[33.1961,35.0383,35.8976],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for China"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('fc0a1634-b5a6-40a3-a09f-086f74ee54d1');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>In China, some divergence of pre- and post-tax nequality apparent in LIS survey data</li>
<li>Very condensed period of divergence in WID between 2000-2005</li>
<li>Again substantial divergence between national accounts and survey means over this time <span class="citation" data-cites="Deaton2005-oy">(<a href="#ref-Deaton2005-oy" role="doc-biblioref">Deaton 2005</a>)</span></li>
</ul>
</div>
</section>
<section id="section-39" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-39"></h2>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>plot_one_country_comparison(selected_entity <span class="op">=</span> <span class="st">"Nigeria"</span>, selected_vars <span class="op">=</span> selected_vars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="bda2ebf0-79e4-4d8a-81a3-6e4e6bc21f44" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("bda2ebf0-79e4-4d8a-81a3-6e4e6bc21f44")) {                    Plotly.newPlot(                        "bda2ebf0-79e4-4d8a-81a3-6e4e6bc21f44",                        [{"hovertemplate":"data=WID: Top 10pc share \u2013 pretax<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 pretax","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 pretax","orientation":"v","showlegend":true,"x":[1985,1992,2003,2009,2018],"xaxis":"x","y":[44.12,46.8,46.24,42.85,42.72],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=WID: Top 10pc share \u2013 posttax_nat<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"WID: Top 10pc share \u2013 posttax_nat","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"WID: Top 10pc share \u2013 posttax_nat","orientation":"v","showlegend":true,"x":[1985,1992,2003,2009,2018],"xaxis":"x","y":[null,null,null,null,null],"yaxis":"y","type":"scatter"},{"hovertemplate":"data=PIP: Top 10pc share (consumption)<br>Year=%{x}<br>value=%{y}<extra></extra>","legendgroup":"PIP: Top 10pc share (consumption)","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"PIP: Top 10pc share (consumption)","orientation":"v","showlegend":true,"x":[1985,1992,1996,2003,2010,2012,2015,2018],"xaxis":"x","y":[28.20693252307708,31.363258539744688,40.68897105834148,29.83761483495836,26.76636602226697,26.65485492487367,26.8831886366113,26.743193682723643],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Year"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value"}},"legend":{"title":{"text":"data","font":{"family":"Lato"}},"tracegroupgap":0,"font":{"size":8}},"title":{"text":"A range of series for Nigeria"},"showlegend":true},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('bda2ebf0-79e4-4d8a-81a3-6e4e6bc21f44');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div class="incremental">
<ul class="incremental">
<li>Nigeria – WID seems not to account for 1996 survey in which inequality apparently peaked.</li>
<li>Breaks in comparability noted by the World Bank – see this <a href="https://ourworldindata.org/explorers/poverty-explorer?hideControls=false&amp;Metric=Share+in+poverty&amp;Poverty+line=%242.15+per+day%3A+International+Poverty+Line&amp;Household+survey+data+type=Show+data+from+both+income+and+consumption+surveys&amp;Show+breaks+between+less+comparable+surveys=true&amp;country=~NGA">Our World in Data chart</a>.</li>
</ul>
</div>
</section>
</section>
<section id="triangulating-the-key-facts-of-global-inequality" class="level1">
<h1>Triangulating the key facts of global inequality</h1>
<p>Concept 1* and 2*</p>
<section id="section-40" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-40"></h2>
<section id="since-1995" class="level3">
<h3 class="anchored" data-anchor-id="since-1995">Since 1995:</h3>
<div class="r-fit-text">
<div class="incremental">
<p><strong>Key differences:</strong></p>
<ul class="incremental">
<li>Strong rise in the population-weighted average level of inequality (Concept 2*) in WID that is absent in PIP.</li>
</ul>
<p><strong>Key similarities:</strong></p>
<ul class="incremental">
<li>For a majority of countries, trends look quite similar across PIP and WID.</li>
<li>Inequality in the average country was roughly flat, with roughly as many coutries with rising inequality as with falling inequality</li>
<li>Inequality was rising particularly strongly in some very populous countries, bringing up the trend in the weighted average</li>
<li>Different indices – even a focus on the <em>very</em> top – paint very similar pictures overall.</li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-41" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-41"></h2>
<section id="since-1980" class="level3">
<h3 class="anchored" data-anchor-id="since-1980">Since 1980</h3>
<div class="incremental">
<div class="r-fit-text">
<p><strong>Key differences:</strong></p>
<ul class="incremental">
<li>Significant rise in unweighted average inequality (Concept 1*) in WID that is absent in PIP.</li>
<li>Huge rise in the population-weighted average level of inequality (Concept 2*) in WID that is much more muted in PIP.</li>
<li>Stronger differences looking at the <em>very</em> top</li>
</ul>
<p><strong>Key similarities</strong></p>
<ul class="incremental">
<li>Amongst those (few) countries with data in both PIP and WID, trends look quite similar for a majority of countries.</li>
<li>Inequality was rising particularly strongly in some very populous countries, bringing up the trend in the weighted average</li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-42" class="level2 smaller scrollable">
<h2 class="smaller scrollable anchored" data-anchor-id="section-42"></h2>
<section id="lessons-concept-3" class="level3">
<h3 class="anchored" data-anchor-id="lessons-concept-3">Lessons (Concept 3)</h3>
<div class="r-fit-text">
<div class="incremental">
<ul class="incremental">
<li><p>The global picture – when weighting by population – is greatly affected by a small number of populous countries. Trends diverge substantialy between PIP and WID for a number of these.</p></li>
<li><p>These larger discrepancies in trends relate to methodological choices, adjustment procedures etc. – the income concept plays a minor role at most.</p></li>
<li><p>The fact that these large differences are a (substantial) minority of cases suggests they may reflect idiosynctratic data quality or methodological issues specific to these countries – and not just a general issue of the ‘the missing top’.</p>
<ul class="incremental">
<li>Some examples of possibly idiosyncratic issues demonstrated above</li>
</ul></li>
<li><p>Room for the two worlds be more proactively connecting up and explaining divergences – particularly in these cases where there are large discrepencies and large populations.</p></li>
<li><p>Analysis of global inequality trends – when weighting by population – should factor in this potential sensitivity to localised data issues</p>
<ul class="incremental">
<li>Something not currently done in the literature on global inequality</li>
<li>Future work!</li>
</ul></li>
</ul>
</div>
</div>
</section>
</section>
<section id="section-43" class="level2">
<h2 class="anchored" data-anchor-id="section-43"></h2>
</section>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<section id="countries-only-found-in-one-source---1995-vs-2015" class="level2">
<h2 class="anchored" data-anchor-id="countries-only-found-in-one-source---1995-vs-2015">Countries only found in one source - 1995 vs 2015</h2>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1995</span>, <span class="dv">2015</span>]</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>        ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>prepped_data <span class="op">=</span> prep_data(</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>        source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>        df_pop <span class="op">=</span> df_pop,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>        df_regions <span class="op">=</span> df_regions,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>        selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>        reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>        max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>        min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>        all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>        reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>        group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>        outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>        tolerance_lookup <span class="op">=</span>  tolerance_lookup</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>prepped_data[<span class="st">'source_count'</span>] <span class="op">=</span> prepped_data.groupby(<span class="st">'Entity'</span>)[<span class="st">'source_var'</span>].transform(<span class="st">'count'</span>)</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>prepped_data <span class="op">=</span> prepped_data[prepped_data[<span class="st">'source_count'</span>]<span class="op">==</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-44" class="level2">
<h2 class="anchored" data-anchor-id="section-44"></h2>
<p>PIP only</p>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>prepped_data.loc[prepped_data[<span class="st">'source_var'</span>] <span class="op">==</span> selected_vars[<span class="dv">1</span>], [<span class="st">'Entity'</span>, <span class="st">'region'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="st">'pip_welfare'</span>, <span class="ss">f'pop</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>]].sort_values([<span class="st">'region'</span>, <span class="st">'Entity'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Entity</th>
      <th>region</th>
      <th>value1995</th>
      <th>value2015</th>
      <th>Year1995</th>
      <th>Year2015</th>
      <th>pip_welfare</th>
      <th>pop2015</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>113</th>
      <td>Estonia</td>
      <td>EE &amp; CA</td>
      <td>31.345717</td>
      <td>24.418510</td>
      <td>1993</td>
      <td>2015</td>
      <td>Income</td>
      <td>1314658.0</td>
    </tr>
    <tr>
      <th>101</th>
      <td>Bolivia</td>
      <td>LAC</td>
      <td>45.362488</td>
      <td>34.798426</td>
      <td>1997</td>
      <td>2015</td>
      <td>Income</td>
      <td>11090090.0</td>
    </tr>
    <tr>
      <th>105</th>
      <td>Chile</td>
      <td>LAC</td>
      <td>45.906710</td>
      <td>36.058571</td>
      <td>1994</td>
      <td>2015</td>
      <td>Income</td>
      <td>17870122.0</td>
    </tr>
    <tr>
      <th>107</th>
      <td>Costa Rica</td>
      <td>LAC</td>
      <td>33.764189</td>
      <td>36.804136</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>4895241.0</td>
    </tr>
    <tr>
      <th>110</th>
      <td>Dominican Republic</td>
      <td>LAC</td>
      <td>36.499534</td>
      <td>34.851871</td>
      <td>1996</td>
      <td>2015</td>
      <td>Income</td>
      <td>10405832.0</td>
    </tr>
    <tr>
      <th>111</th>
      <td>Ecuador</td>
      <td>LAC</td>
      <td>40.029240</td>
      <td>34.903098</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>16195904.0</td>
    </tr>
    <tr>
      <th>112</th>
      <td>El Salvador</td>
      <td>LAC</td>
      <td>38.810098</td>
      <td>31.826639</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>6231072.0</td>
    </tr>
    <tr>
      <th>118</th>
      <td>Honduras</td>
      <td>LAC</td>
      <td>43.821143</td>
      <td>36.606946</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>9294510.0</td>
    </tr>
    <tr>
      <th>129</th>
      <td>Nicaragua</td>
      <td>LAC</td>
      <td>44.165274</td>
      <td>37.214408</td>
      <td>1993</td>
      <td>2014</td>
      <td>Income</td>
      <td>6298610.0</td>
    </tr>
    <tr>
      <th>131</th>
      <td>Panama</td>
      <td>LAC</td>
      <td>43.213834</td>
      <td>39.022251</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>3957102.0</td>
    </tr>
    <tr>
      <th>132</th>
      <td>Paraguay</td>
      <td>LAC</td>
      <td>46.108719</td>
      <td>36.730884</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>6177954.0</td>
    </tr>
    <tr>
      <th>133</th>
      <td>Peru</td>
      <td>LAC</td>
      <td>40.792400</td>
      <td>32.610774</td>
      <td>1997</td>
      <td>2015</td>
      <td>Income</td>
      <td>30711864.0</td>
    </tr>
    <tr>
      <th>136</th>
      <td>Saint Lucia</td>
      <td>LAC</td>
      <td>32.480287</td>
      <td>38.622789</td>
      <td>1995</td>
      <td>2016</td>
      <td>Income</td>
      <td>175638.0</td>
    </tr>
    <tr>
      <th>145</th>
      <td>Uruguay</td>
      <td>LAC</td>
      <td>30.523738</td>
      <td>29.819636</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>3402820.0</td>
    </tr>
    <tr>
      <th>176</th>
      <td>Morocco</td>
      <td>MENA</td>
      <td>30.845670</td>
      <td>31.885165</td>
      <td>1998</td>
      <td>2013</td>
      <td>Consumption</td>
      <td>34680456.0</td>
    </tr>
    <tr>
      <th>160</th>
      <td>Ghana</td>
      <td>SS Africa</td>
      <td>29.589119</td>
      <td>32.211169</td>
      <td>1998</td>
      <td>2016</td>
      <td>Consumption</td>
      <td>28870946.0</td>
    </tr>
    <tr>
      <th>161</th>
      <td>Guinea</td>
      <td>SS Africa</td>
      <td>36.045310</td>
      <td>23.085351</td>
      <td>1994</td>
      <td>2018</td>
      <td>Consumption</td>
      <td>11626003.0</td>
    </tr>
    <tr>
      <th>162</th>
      <td>Guinea-Bissau</td>
      <td>SS Africa</td>
      <td>34.396048</td>
      <td>27.600140</td>
      <td>1993</td>
      <td>2018</td>
      <td>Consumption</td>
      <td>1788931.0</td>
    </tr>
    <tr>
      <th>172</th>
      <td>Mali</td>
      <td>SS Africa</td>
      <td>40.439091</td>
      <td>28.190943</td>
      <td>1994</td>
      <td>2018</td>
      <td>Consumption</td>
      <td>18112910.0</td>
    </tr>
    <tr>
      <th>183</th>
      <td>Senegal</td>
      <td>SS Africa</td>
      <td>33.894347</td>
      <td>30.514855</td>
      <td>1994</td>
      <td>2018</td>
      <td>Consumption</td>
      <td>14356191.0</td>
    </tr>
    <tr>
      <th>184</th>
      <td>South Africa</td>
      <td>SS Africa</td>
      <td>46.659746</td>
      <td>50.498953</td>
      <td>1993</td>
      <td>2014</td>
      <td>Consumption</td>
      <td>55876504.0</td>
    </tr>
    <tr>
      <th>99</th>
      <td>Austria</td>
      <td>W. Europe</td>
      <td>22.409297</td>
      <td>23.842656</td>
      <td>1995</td>
      <td>2015</td>
      <td>Income</td>
      <td>8642422.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="section-45" class="level2">
<h2 class="anchored" data-anchor-id="section-45"></h2>
<p>WID only</p>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>prepped_data.loc[prepped_data[<span class="st">'source_var'</span>] <span class="op">==</span> selected_vars[<span class="dv">0</span>], [<span class="st">'Entity'</span>, <span class="st">'region'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'pop</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>]].sort_values([<span class="st">'region'</span>, <span class="st">'Entity'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Entity</th>
      <th>region</th>
      <th>value1995</th>
      <th>value2015</th>
      <th>Year1995</th>
      <th>Year2015</th>
      <th>pop2015</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>21</th>
      <td>Cyprus</td>
      <td>EE &amp; CA</td>
      <td>35.58</td>
      <td>37.51</td>
      <td>1996</td>
      <td>2015</td>
      <td>1187286.0</td>
    </tr>
    <tr>
      <th>75</th>
      <td>Serbia</td>
      <td>EE &amp; CA</td>
      <td>33.75</td>
      <td>40.66</td>
      <td>1998</td>
      <td>2015</td>
      <td>7519501.0</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Hong Kong</td>
      <td>East Asia</td>
      <td>42.06</td>
      <td>48.18</td>
      <td>1996</td>
      <td>2016</td>
      <td>7399845.0</td>
    </tr>
    <tr>
      <th>42</th>
      <td>Japan</td>
      <td>East Asia</td>
      <td>37.89</td>
      <td>44.32</td>
      <td>1995</td>
      <td>2015</td>
      <td>127250936.0</td>
    </tr>
    <tr>
      <th>79</th>
      <td>South Korea</td>
      <td>East Asia</td>
      <td>32.01</td>
      <td>34.62</td>
      <td>1995</td>
      <td>2015</td>
      <td>50994396.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bahrain</td>
      <td>MENA</td>
      <td>54.29</td>
      <td>55.72</td>
      <td>1995</td>
      <td>2015</td>
      <td>1362157.0</td>
    </tr>
    <tr>
      <th>43</th>
      <td>Jordan</td>
      <td>MENA</td>
      <td>52.67</td>
      <td>48.36</td>
      <td>1992</td>
      <td>2013</td>
      <td>9494250.0</td>
    </tr>
    <tr>
      <th>68</th>
      <td>Palestine</td>
      <td>MENA</td>
      <td>50.56</td>
      <td>50.06</td>
      <td>1997</td>
      <td>2016</td>
      <td>4484615.0</td>
    </tr>
    <tr>
      <th>74</th>
      <td>Saudi Arabia</td>
      <td>MENA</td>
      <td>55.55</td>
      <td>54.55</td>
      <td>1995</td>
      <td>2015</td>
      <td>32749838.0</td>
    </tr>
    <tr>
      <th>90</th>
      <td>United Arab Emirates</td>
      <td>MENA</td>
      <td>54.19</td>
      <td>48.58</td>
      <td>1998</td>
      <td>2014</td>
      <td>8916909.0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>Singapore</td>
      <td>S &amp; SE Asia</td>
      <td>33.45</td>
      <td>45.26</td>
      <td>1995</td>
      <td>2013</td>
      <td>5650020.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Angola</td>
      <td>SS Africa</td>
      <td>58.03</td>
      <td>58.01</td>
      <td>1995</td>
      <td>2018</td>
      <td>28127724.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Comoros</td>
      <td>SS Africa</td>
      <td>66.96</td>
      <td>50.26</td>
      <td>1995</td>
      <td>2014</td>
      <td>730221.0</td>
    </tr>
    <tr>
      <th>96</th>
      <td>Zimbabwe</td>
      <td>SS Africa</td>
      <td>51.33</td>
      <td>52.57</td>
      <td>1996</td>
      <td>2017</td>
      <td>14154937.0</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Iceland</td>
      <td>W. Europe</td>
      <td>30.19</td>
      <td>29.62</td>
      <td>1995</td>
      <td>2015</td>
      <td>331068.0</td>
    </tr>
    <tr>
      <th>55</th>
      <td>Malta</td>
      <td>W. Europe</td>
      <td>30.14</td>
      <td>35.08</td>
      <td>1995</td>
      <td>2015</td>
      <td>456585.0</td>
    </tr>
    <tr>
      <th>71</th>
      <td>Portugal</td>
      <td>W. Europe</td>
      <td>36.67</td>
      <td>37.17</td>
      <td>1995</td>
      <td>2015</td>
      <td>10365436.0</td>
    </tr>
    <tr>
      <th>62</th>
      <td>New Zealand</td>
      <td>W. Offshoots</td>
      <td>33.83</td>
      <td>33.83</td>
      <td>1995</td>
      <td>2015</td>
      <td>4590591.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="countries-only-found-in-one-source---1980-vs-2018" class="level2">
<h2 class="anchored" data-anchor-id="countries-only-found-in-one-source---1980-vs-2018">Countries only found in one source - 1980 vs 2018</h2>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1980</span>, <span class="dv">2018</span>]</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>        ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>prepped_data <span class="op">=</span> prep_data(</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>        source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>        df_pop <span class="op">=</span> df_pop,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>        df_regions <span class="op">=</span> df_regions,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>        selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>        reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>        max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>        min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>        all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>        reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>        group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>        outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>        tolerance_lookup <span class="op">=</span>  tolerance_lookup</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>prepped_data[<span class="st">'source_count'</span>] <span class="op">=</span> prepped_data.groupby(<span class="st">'Entity'</span>)[<span class="st">'source_var'</span>].transform(<span class="st">'count'</span>)</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>prepped_data <span class="op">=</span> prepped_data[prepped_data[<span class="st">'source_count'</span>]<span class="op">==</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-46" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="section-46"></h2>
<p>PIP only</p>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>prepped_data.loc[prepped_data[<span class="st">'source_var'</span>] <span class="op">==</span> selected_vars[<span class="dv">1</span>], [<span class="st">'Entity'</span>, <span class="st">'region'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="st">'pip_welfare'</span>, <span class="ss">f'pop</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>]].sort_values([<span class="st">'region'</span>, <span class="st">'Entity'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Entity</th>
      <th>region</th>
      <th>value1980</th>
      <th>value2018</th>
      <th>Year1980</th>
      <th>Year2018</th>
      <th>pip_welfare</th>
      <th>pop2018</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>68</th>
      <td>Costa Rica</td>
      <td>LAC</td>
      <td>33.732380</td>
      <td>36.348066</td>
      <td>1981</td>
      <td>2018</td>
      <td>Income</td>
      <td>5040738.0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>Panama</td>
      <td>LAC</td>
      <td>35.996523</td>
      <td>37.107976</td>
      <td>1979</td>
      <td>2018</td>
      <td>Income</td>
      <td>4165258.0</td>
    </tr>
    <tr>
      <th>99</th>
      <td>Peru</td>
      <td>LAC</td>
      <td>35.155048</td>
      <td>31.624431</td>
      <td>1985</td>
      <td>2018</td>
      <td>Mixed</td>
      <td>32203946.0</td>
    </tr>
    <tr>
      <th>84</th>
      <td>Uruguay</td>
      <td>LAC</td>
      <td>33.315952</td>
      <td>29.679041</td>
      <td>1981</td>
      <td>2018</td>
      <td>Income</td>
      <td>3427044.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="section-47" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="section-47"></h2>
<p>WID only</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>prepped_data.loc[prepped_data[<span class="st">'source_var'</span>] <span class="op">==</span> selected_vars[<span class="dv">0</span>], [<span class="st">'Entity'</span>, <span class="st">'region'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'value</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'Year</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'pop</span><span class="sc">{</span>reference_vals[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>]].sort_values([<span class="st">'region'</span>, <span class="st">'Entity'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Entity</th>
      <th>region</th>
      <th>value1980</th>
      <th>value2018</th>
      <th>Year1980</th>
      <th>Year2018</th>
      <th>pop2018</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4</th>
      <td>Bosnia and Herzegovina</td>
      <td>EE &amp; CA</td>
      <td>27.93</td>
      <td>34.69</td>
      <td>1980</td>
      <td>2015</td>
      <td>3400132.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Bulgaria</td>
      <td>EE &amp; CA</td>
      <td>21.38</td>
      <td>44.19</td>
      <td>1980</td>
      <td>2018</td>
      <td>7117424.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Croatia</td>
      <td>EE &amp; CA</td>
      <td>27.46</td>
      <td>34.93</td>
      <td>1984</td>
      <td>2018</td>
      <td>4160488.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Czechia</td>
      <td>EE &amp; CA</td>
      <td>18.17</td>
      <td>28.86</td>
      <td>1980</td>
      <td>2018</td>
      <td>10534598.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Hungary</td>
      <td>EE &amp; CA</td>
      <td>18.05</td>
      <td>32.48</td>
      <td>1980</td>
      <td>2018</td>
      <td>9776361.0</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Montenegro</td>
      <td>EE &amp; CA</td>
      <td>28.77</td>
      <td>34.97</td>
      <td>1980</td>
      <td>2017</td>
      <td>631459.0</td>
    </tr>
    <tr>
      <th>39</th>
      <td>North Macedonia</td>
      <td>EE &amp; CA</td>
      <td>27.42</td>
      <td>32.29</td>
      <td>1980</td>
      <td>2017</td>
      <td>2113497.0</td>
    </tr>
    <tr>
      <th>44</th>
      <td>Romania</td>
      <td>EE &amp; CA</td>
      <td>24.94</td>
      <td>40.93</td>
      <td>1980</td>
      <td>2018</td>
      <td>19606778.0</td>
    </tr>
    <tr>
      <th>45</th>
      <td>Russia</td>
      <td>EE &amp; CA</td>
      <td>21.68</td>
      <td>45.09</td>
      <td>1980</td>
      <td>2017</td>
      <td>145652288.0</td>
    </tr>
    <tr>
      <th>48</th>
      <td>Serbia</td>
      <td>EE &amp; CA</td>
      <td>32.41</td>
      <td>35.33</td>
      <td>1984</td>
      <td>2018</td>
      <td>7433825.0</td>
    </tr>
    <tr>
      <th>50</th>
      <td>Slovakia</td>
      <td>EE &amp; CA</td>
      <td>22.91</td>
      <td>27.50</td>
      <td>1980</td>
      <td>2018</td>
      <td>5446746.0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Hong Kong</td>
      <td>East Asia</td>
      <td>41.97</td>
      <td>48.18</td>
      <td>1981</td>
      <td>2016</td>
      <td>7481563.0</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Japan</td>
      <td>East Asia</td>
      <td>35.92</td>
      <td>44.24</td>
      <td>1980</td>
      <td>2018</td>
      <td>126255872.0</td>
    </tr>
    <tr>
      <th>51</th>
      <td>South Korea</td>
      <td>East Asia</td>
      <td>32.01</td>
      <td>34.62</td>
      <td>1980</td>
      <td>2016</td>
      <td>51676900.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Egypt</td>
      <td>MENA</td>
      <td>46.20</td>
      <td>48.85</td>
      <td>1980</td>
      <td>2016</td>
      <td>103740768.0</td>
    </tr>
    <tr>
      <th>47</th>
      <td>Saudi Arabia</td>
      <td>MENA</td>
      <td>55.55</td>
      <td>54.41</td>
      <td>1980</td>
      <td>2018</td>
      <td>35018132.0</td>
    </tr>
    <tr>
      <th>59</th>
      <td>Turkey</td>
      <td>MENA</td>
      <td>59.68</td>
      <td>53.20</td>
      <td>1980</td>
      <td>2018</td>
      <td>82809304.0</td>
    </tr>
    <tr>
      <th>49</th>
      <td>Singapore</td>
      <td>S &amp; SE Asia</td>
      <td>35.53</td>
      <td>45.26</td>
      <td>1980</td>
      <td>2013</td>
      <td>5814543.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Denmark</td>
      <td>W. Europe</td>
      <td>26.10</td>
      <td>33.51</td>
      <td>1980</td>
      <td>2017</td>
      <td>5766689.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Finland</td>
      <td>W. Europe</td>
      <td>27.22</td>
      <td>33.86</td>
      <td>1980</td>
      <td>2017</td>
      <td>5515465.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Germany</td>
      <td>W. Europe</td>
      <td>28.60</td>
      <td>37.81</td>
      <td>1980</td>
      <td>2017</td>
      <td>82896696.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Greece</td>
      <td>W. Europe</td>
      <td>36.20</td>
      <td>33.92</td>
      <td>1980</td>
      <td>2017</td>
      <td>10633275.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Iceland</td>
      <td>W. Europe</td>
      <td>29.92</td>
      <td>29.29</td>
      <td>1980</td>
      <td>2016</td>
      <td>352951.0</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Ireland</td>
      <td>W. Europe</td>
      <td>31.13</td>
      <td>36.20</td>
      <td>1980</td>
      <td>2018</td>
      <td>4834506.0</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Italy</td>
      <td>W. Europe</td>
      <td>27.71</td>
      <td>35.75</td>
      <td>1980</td>
      <td>2014</td>
      <td>59877432.0</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Malta</td>
      <td>W. Europe</td>
      <td>30.14</td>
      <td>34.64</td>
      <td>1980</td>
      <td>2017</td>
      <td>491590.0</td>
    </tr>
    <tr>
      <th>43</th>
      <td>Portugal</td>
      <td>W. Europe</td>
      <td>28.26</td>
      <td>37.64</td>
      <td>1980</td>
      <td>2017</td>
      <td>10289833.0</td>
    </tr>
    <tr>
      <th>37</th>
      <td>New Zealand</td>
      <td>W. Offshoots</td>
      <td>29.11</td>
      <td>34.65</td>
      <td>1980</td>
      <td>2018</td>
      <td>4838528.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="ex-slide-graveyard" class="level1">
<h1>Ex-slide graveyard</h1>
<section id="section-48" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-48"></h2>
<section id="different-worlds-wid" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-wid">Different ‘worlds’: <em>WID</em></h3>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1990</span>, <span class="dv">2018</span>]</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 1pc share – pretax'</span>,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Gini'</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>        ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>plot_change_scatter(</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> <span class="st">'WID: Top 1pc share – pretax'</span>,</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="b27ec8e6-8d25-4536-a8a4-d1c55bb22945" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b27ec8e6-8d25-4536-a8a4-d1c55bb22945")) {                    Plotly.newPlot(                        "b27ec8e6-8d25-4536-a8a4-d1c55bb22945",                        [{"customdata":[[1988,2018,"EE & CA",1.078742303676258,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"EE & CA",2.0776612906352643,"WID: Top 1pc share \u2013 pretax"],[1993,2017,"EE & CA",1.5134449733929793,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"EE & CA",1.5436183498814349,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"EE & CA",1.2660633958358622,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"EE & CA",5.102425238307507,"WID: Top 1pc share \u2013 pretax"],[1989,2018,"EE & CA",1.1999235289482115,"WID: Top 1pc share \u2013 pretax"],[1988,2018,"EE & CA",1.1438197420457918,"WID: Top 1pc share \u2013 pretax"],[1992,2018,"EE & CA",1.0494941652366128,"WID: Top 1pc share \u2013 pretax"],[1988,2018,"EE & CA",1.0273645435067706,"WID: Top 1pc share \u2013 pretax"],[1989,2017,"EE & CA",1.0497077859591426,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"EE & CA",1.024447601385968,"WID: Top 1pc share \u2013 pretax"],[1989,2018,"EE & CA",1.1075031463122895,"WID: Top 1pc share \u2013 pretax"],[1988,2018,"EE & CA",1.0446858919844195,"WID: Top 1pc share \u2013 pretax"],[1988,2018,"EE & CA",1.2874716876398267,"WID: Top 1pc share \u2013 pretax"],[1988,2017,"EE & CA",1.071240139282377,"WID: Top 1pc share \u2013 pretax"],[1989,2017,"EE & CA",1.0078634787457463,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"EE & CA",1.1909901678288435,"WID: Top 1pc share \u2013 pretax"],[1993,2018,"EE & CA",1.263782403114248,"WID: Top 1pc share \u2013 pretax"],[1992,2018,"EE & CA",2.244963303310575,"WID: Top 1pc share \u2013 pretax"],[1990,2015,"EE & CA",1.08603502602418,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Moldova","Poland","Kazakhstan","Romania","Hungary","Russia","Serbia","Slovakia","Slovenia","Estonia","North Macedonia","Cyprus","Croatia","Latvia","Czechia","Lithuania","Montenegro","Bulgaria","Belarus","Ukraine","Bosnia and Herzegovina"],"legendgroup":"EE & CA","marker":{"color":"#636efa","size":[1.078742303676258,2.0776612906352643,1.5134449733929793,1.5436183498814349,1.2660633958358622,5.102425238307507,1.1999235289482115,1.1438197420457918,1.0494941652366128,1.0273645435067706,1.0497077859591426,1.024447601385968,1.1075031463122895,1.0446858919844195,1.2874716876398267,1.071240139282377,1.0078634787457463,1.1909901678288435,1.263782403114248,2.244963303310575,1.08603502602418],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"EE & CA","orientation":"v","showlegend":true,"x":[4.98,5.53,10.64,6.0600000000000005,5.37,7.449999999999999,9.3,4.569999999999999,4.83,4.68,6.419999999999999,11.57,4.49,3.7,2.98,4.49,6.69,5.680000000000001,8.66,13.6,6.4],"xaxis":"x","y":[10.91,14.66,14.8,13.93,10.97,20.0,11.63,7.86,8.04,12.96,9.41,10.26,9.83,9.92,10.32,12.45,9.07,19.06,9.95,9.62,9.86],"yaxis":"y","type":"scatter"},{"customdata":[[1990,2018,"East Asia",4.554780987658852,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"East Asia",1.6599269559288654,"WID: Top 1pc share \u2013 pretax"],[1995,2017,"East Asia",1.0793678346183206,"WID: Top 1pc share \u2013 pretax"],[1991,2016,"East Asia",1.2012713780166921,"WID: Top 1pc share \u2013 pretax"],[1990,2016,"East Asia",2.4490958324689904,"WID: Top 1pc share \u2013 pretax"],[1990,2016,"East Asia",41.0,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Japan","Taiwan","Mongolia","Hong Kong","South Korea","China"],"legendgroup":"East Asia","marker":{"color":"#EF553B","size":[4.554780987658852,1.6599269559288654,1.0793678346183206,1.2012713780166921,2.4490958324689904,41.0],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"East Asia","orientation":"v","showlegend":true,"x":[14.63,11.4,14.84,16.669999999999998,8.450000000000001,8.21],"xaxis":"x","y":[12.86,19.33,16.43,17.849999999999998,11.76,14.05],"yaxis":"y","type":"scatter"},{"customdata":[[1990,2018,"LAC",2.244021407024084,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"LAC",2.381335429632315,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"LAC",6.9239415261722135,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"LAC",4.491479458597591,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Argentina","Colombia","Brazil","Mexico"],"legendgroup":"LAC","marker":{"color":"#00cc96","size":[2.244021407024084,2.381335429632315,6.9239415261722135,4.491479458597591],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"LAC","orientation":"v","showlegend":true,"x":[13.98,19.93,23.74,12.03],"xaxis":"x","y":[14.499999999999998,17.669999999999998,20.68,29.54],"yaxis":"y","type":"scatter"},{"customdata":[[1990,2018,"MENA",1.9787471599054707,"WID: Top 1pc share \u2013 pretax"],[1990,2016,"MENA",3.919082760813409,"WID: Top 1pc share \u2013 pretax"],[1992,2016,"MENA",1.2287976758347732,"WID: Top 1pc share \u2013 pretax"],[1995,2015,"MENA",1.0320288500573809,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"MENA",3.3280975026471933,"WID: Top 1pc share \u2013 pretax"],[1992,2013,"MENA",1.2853616253773976,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"MENA",3.4073866482681985,"WID: Top 1pc share \u2013 pretax"],[1990,2015,"MENA",1.3269557202139686,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Saudi Arabia","Egypt","Israel","Bahrain","Turkey","Jordan","Iran","Tunisia"],"legendgroup":"MENA","marker":{"color":"#ab63fa","size":[1.9787471599054707,3.919082760813409,1.2287976758347732,1.0320288500573809,3.3280975026471933,1.2853616253773976,3.4073866482681985,1.3269557202139686],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"MENA","orientation":"v","showlegend":true,"x":[21.03,15.95,17.69,20.83,25.1,22.12,20.16,14.42],"xaxis":"x","y":[20.98,19.76,16.04,24.34,20.380000000000003,17.05,17.169999999999998,10.91],"yaxis":"y","type":"scatter"},{"customdata":[[1989,2015,"S & SE Asia",1.904805421517191,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"S & SE Asia",7.193999680341124,"WID: Top 1pc share \u2013 pretax"],[1992,2018,"S & SE Asia",1.1906396107457178,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"S & SE Asia",8.530480489805324,"WID: Top 1pc share \u2013 pretax"],[1990,2013,"S & SE Asia",39.64288511150377,"WID: Top 1pc share \u2013 pretax"],[1990,2016,"S & SE Asia",1.5993509968951876,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"S & SE Asia",2.99827862665612,"WID: Top 1pc share \u2013 pretax"],[1991,2016,"S & SE Asia",5.611536669987893,"WID: Top 1pc share \u2013 pretax"],[1992,2018,"S & SE Asia",3.6698743957373394,"WID: Top 1pc share \u2013 pretax"],[1991,2018,"S & SE Asia",4.055399773779297,"WID: Top 1pc share \u2013 pretax"],[1990,2013,"S & SE Asia",1.1542042333072613,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Malaysia","Pakistan","Laos","Indonesia","India","Sri Lanka","Thailand","Bangladesh","Vietnam","Philippines","Singapore"],"legendgroup":"S & SE Asia","marker":{"color":"#FFA15A","size":[1.904805421517191,7.193999680341124,1.1906396107457178,8.530480489805324,39.64288511150377,1.5993509968951876,2.99827862665612,5.611536669987893,3.6698743957373394,4.055399773779297,1.1542042333072613],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"S & SE Asia","orientation":"v","showlegend":true,"x":[19.15,15.09,17.06,15.0,10.74,17.669999999999998,23.47,12.58,16.42,20.81,10.94],"xaxis":"x","y":[14.87,16.650000000000002,19.71,15.53,22.0,20.47,17.79,16.150000000000002,15.740000000000002,16.619999999999997,13.76],"yaxis":"y","type":"scatter"},{"customdata":[[1989,2018,"SS Africa",1.211992619788023,"WID: Top 1pc share \u2013 pretax"],[1991,2017,"SS Africa",2.630177765228227,"WID: Top 1pc share \u2013 pretax"],[1992,2018,"SS Africa",6.5913703705046665,"WID: Top 1pc share \u2013 pretax"],[1992,2014,"SS Africa",1.627482186381188,"WID: Top 1pc share \u2013 pretax"],[1989,2016,"SS Africa",2.1621929812945093,"WID: Top 1pc share \u2013 pretax"],[1995,2018,"SS Africa",1.8730211652107056,"WID: Top 1pc share \u2013 pretax"],[1991,2019,"SS Africa",1.4150227688921886,"WID: Top 1pc share \u2013 pretax"],[1987,2014,"SS Africa",1.1106153850941731,"WID: Top 1pc share \u2013 pretax"],[1992,2015,"SS Africa",1.0590651698132385,"WID: Top 1pc share \u2013 pretax"],[1991,2016,"SS Africa",1.8616458476188456,"WID: Top 1pc share \u2013 pretax"],[1988,2015,"SS Africa",1.7098396664457824,"WID: Top 1pc share \u2013 pretax"],[1995,2015,"SS Africa",4.127696751188163,"WID: Top 1pc share \u2013 pretax"],[1992,2013,"SS Africa",1.3145449378615934,"WID: Top 1pc share \u2013 pretax"],[1995,2014,"SS Africa",1.0119535843137915,"WID: Top 1pc share \u2013 pretax"],[1994,2014,"SS Africa",1.5658091553418774,"WID: Top 1pc share \u2013 pretax"],[1991,2015,"SS Africa",1.4936187906541687,"WID: Top 1pc share \u2013 pretax"],[1993,2017,"SS Africa",1.052094516138578,"WID: Top 1pc share \u2013 pretax"],[1993,2015,"SS Africa",1.0592485515992325,"WID: Top 1pc share \u2013 pretax"],[1992,2015,"SS Africa",2.4004311910002762,"WID: Top 1pc share \u2013 pretax"],[1994,2016,"SS Africa",1.0227986052613807,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Sierra Leone","Tanzania","Nigeria","Niger","Uganda","Angola","Zimbabwe","Mauritania","Gambia","Ghana","Cote d'Ivoire","Ethiopia","Burundi","Comoros","Burkina Faso","Zambia","Lesotho","Botswana","Kenya","Eswatini"],"legendgroup":"SS Africa","marker":{"color":"#19d3f3","size":[1.211992619788023,2.630177765228227,6.5913703705046665,1.627482186381188,2.1621929812945093,1.8730211652107056,1.4150227688921886,1.1106153850941731,1.0590651698132385,1.8616458476188456,1.7098396664457824,4.127696751188163,1.3145449378615934,1.0119535843137915,1.5658091553418774,1.4936187906541687,1.052094516138578,1.0592485515992325,2.4004311910002762,1.0227986052613807],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"SS Africa","orientation":"v","showlegend":true,"x":[20.78,11.55,11.26,15.5,16.5,21.98,17.41,14.06,18.56,13.79,21.03,29.69,12.53,29.13,21.27,18.87,22.7,36.08,32.58,31.61],"xaxis":"x","y":[15.02,18.15,11.59,11.6,17.05,25.98,21.08,10.75,13.61,15.23,17.21,13.82,14.74,14.15,14.56,23.17,14.46,22.74,15.19,19.33],"yaxis":"y","type":"scatter"},{"customdata":[[1990,2017,"W. Europe",1.2304336841808299,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.276960113788864,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.1528531090598466,"WID: Top 1pc share \u2013 pretax"],[1991,2017,"W. Europe",1.3132778388944126,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",2.311175337071975,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",2.86572389078758,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.0039143752776636,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",3.3305649546936276,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.2902577637747816,"WID: Top 1pc share \u2013 pretax"],[1990,2016,"W. Europe",1.0,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.2805609189179135,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"W. Europe",1.126533573507381,"WID: Top 1pc share \u2013 pretax"],[1990,2014,"W. Europe",2.6806321225784786,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.1400243461131905,"WID: Top 1pc share \u2013 pretax"],[1991,2017,"W. Europe",1.0071988715308868,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.4780939907589372,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"W. Europe",2.804873776689699,"WID: Top 1pc share \u2013 pretax"],[1990,2017,"W. Europe",1.1457599749867808,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Switzerland","Sweden","Denmark","Belgium","Spain","United Kingdom","Malta","Germany","Greece","Iceland","Portugal","Ireland","Italy","Norway","Luxembourg","Netherlands","France","Finland"],"legendgroup":"W. Europe","marker":{"color":"#FF6692","size":[1.2304336841808299,1.276960113788864,1.1528531090598466,1.3132778388944126,2.311175337071975,2.86572389078758,1.0039143752776636,3.3305649546936276,1.2902577637747816,1.0,1.2805609189179135,1.126533573507381,2.6806321225784786,1.1400243461131905,1.0071988715308868,1.4780939907589372,2.804873776689699,1.1457599749867808],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Europe","orientation":"v","showlegend":true,"x":[10.15,8.15,8.39,7.870000000000001,11.68,9.1,8.16,11.45,9.14,7.68,8.94,9.07,7.6,5.94,13.45,5.949999999999999,9.33,4.49],"xaxis":"x","y":[10.93,10.02,12.75,8.5,12.71,13.44,10.83,13.19,11.0,8.55,11.65,12.45,11.23,10.18,13.750000000000002,7.049999999999999,9.73,10.61],"yaxis":"y","type":"scatter"},{"customdata":[[1990,2018,"W. Offshoots",2.035699359323261,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"W. Offshoots",1.1266471318666214,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"W. Offshoots",10.367776363898875,"WID: Top 1pc share \u2013 pretax"],[1990,2018,"W. Offshoots",1.695305721115243,"WID: Top 1pc share \u2013 pretax"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Canada","New Zealand","United States","Australia"],"legendgroup":"W. Offshoots","marker":{"color":"#B6E880","size":[2.035699359323261,1.1266471318666214,10.367776363898875,1.695305721115243],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Offshoots","orientation":"v","showlegend":true,"x":[9.81,9.99,14.7,7.5],"xaxis":"x","y":[13.95,11.94,19.25,11.23],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"value1990"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value2018"}},"legend":{"title":{"text":"region"},"tracegroupgap":0,"itemsizing":"constant"},"title":{"text":"WID: Top 1pc share \u2013 pretax, 1990 vs 2018 (+/- 5)"},"height":600,"shapes":[{"line":{"color":"#808080"},"opacity":0.5,"type":"line","x0":2.98,"x1":36.08,"xref":"x","y0":2.98,"y1":36.08,"yref":"y"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b27ec8e6-8d25-4536-a8a4-d1c55bb22945');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
</section>
<section id="section-49" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-49"></h2>
<section id="different-worlds-world-bank-pip" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-world-bank-pip">Different ‘worlds’: <em>World Bank PIP</em></h3>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>plot_change_scatter(</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>      plot_var <span class="op">=</span> <span class="st">'PIP: Gini'</span>,</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>      )[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<div>                            <div id="b8c6e010-79c5-4abc-adbd-fbe5d254fd63" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b8c6e010-79c5-4abc-adbd-fbe5d254fd63")) {                    Plotly.newPlot(                        "b8c6e010-79c5-4abc-adbd-fbe5d254fd63",                        [{"customdata":[[1992,2018,"EE & CA",1.2923781718999683,"PIP: Gini"],[1993,2018,"EE & CA",1.0761733389578712,"PIP: Gini"],[1993,2018,"EE & CA",1.0323031640136555,"PIP: Gini"],[1989,2018,"EE & CA",2.0824701469423545,"PIP: Gini"],[1989,2018,"EE & CA",1.5484931872125096,"PIP: Gini"],[1992,2018,"EE & CA",1.1487439745088295,"PIP: Gini"],[1993,2018,"EE & CA",1.0496223724380949,"PIP: Gini"],[1987,2018,"EE & CA",1.0544300516279599,"PIP: Gini"],[1993,2018,"EE & CA",1.518323538645773,"PIP: Gini"],[1989,2018,"EE & CA",1.270972525091204,"PIP: Gini"],[1992,2018,"EE & CA",1.195908572384128,"PIP: Gini"],[1993,2018,"EE & CA",5.106860384923209,"PIP: Gini"],[1992,2018,"EE & CA",2.2497514894481556,"PIP: Gini"],[1993,2018,"EE & CA",1.2686918141863202,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Czechia","Lithuania","Estonia","Poland","Romania","Slovakia","Latvia","Slovenia","Kazakhstan","Hungary","Bulgaria","Russia","Ukraine","Belarus"],"legendgroup":"EE & CA","marker":{"color":"#636efa","size":[1.2923781718999683,1.0761733389578712,1.0323031640136555,2.0824701469423545,1.5484931872125096,1.1487439745088295,1.0496223724380949,1.0544300516279599,1.518323538645773,1.270972525091204,1.195908572384128,5.106860384923209,2.2497514894481556,1.2686918141863202],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"EE & CA","orientation":"v","showlegend":true,"x":[20.703283450082928,33.64113630171077,39.50344817150475,26.89247240566751,23.30730338954192,20.18657811939966,26.99313110390889,23.59836985233234,32.66573479388877,25.047778837342637,30.7143080005277,48.375737912852976,29.70892138221591,21.60371933908537],"xaxis":"x","y":[24.99034080105021,35.707807704057146,30.32145132574509,30.215439384422787,35.76150330987011,24.97014747752156,35.09615142209008,24.63336450390815,27.7928745774732,29.61204436230077,41.28409897525426,37.47300623276349,26.071485707487863,25.24052540652808],"yaxis":"y","type":"scatter"},{"customdata":[[1990,2018,"East Asia",41.0,"PIP: Gini"],[1995,2018,"East Asia",1.0843000301167722,"PIP: Gini"],[1991,2016,"East Asia",1.6647874233276003,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["China","Mongolia","Taiwan"],"legendgroup":"East Asia","marker":{"color":"#EF553B","size":[41.0,1.0843000301167722,1.6647874233276003],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"East Asia","orientation":"v","showlegend":true,"x":[32.22661822757224,33.195340198338094,29.96780212180384],"xaxis":"x","y":[38.49764207266088,32.740990379668986,31.48271564455893],"yaxis":"y","type":"scatter"},{"customdata":[[1989,2018,"LAC",1.0917261454251066,"PIP: Gini"],[1995,2016,"LAC",1.0,"PIP: Gini"],[1990,2018,"LAC",1.1768785484728976,"PIP: Gini"],[1989,2018,"LAC",1.1125665266690778,"PIP: Gini"],[1993,2014,"LAC",1.1805174155510136,"PIP: Gini"],[1989,2018,"LAC",4.4959900875857155,"PIP: Gini"],[1991,2018,"LAC",2.2488097095329835,"PIP: Gini"],[1994,2018,"LAC",1.9041214788926406,"PIP: Gini"],[1990,2018,"LAC",1.3226502983171868,"PIP: Gini"],[1990,2018,"LAC",1.1372820386635294,"PIP: Gini"],[1989,2018,"LAC",1.2988976264242598,"PIP: Gini"],[1987,2018,"LAC",1.4753441587688039,"PIP: Gini"],[1991,2018,"LAC",1.1721640874269146,"PIP: Gini"],[1990,2017,"LAC",1.5229350983790824,"PIP: Gini"],[1989,2018,"LAC",2.3861067669889255,"PIP: Gini"],[1989,2014,"LAC",1.4706720721728408,"PIP: Gini"],[1990,2018,"LAC",1.2714381358867957,"PIP: Gini"],[1990,2018,"LAC",6.928151624386924,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Uruguay","Saint Lucia","Paraguay","Panama","Nicaragua","Mexico","Argentina","Peru","Bolivia","Costa Rica","Dominican Republic","Ecuador","El Salvador","Chile","Colombia","Guatemala","Honduras","Brazil"],"legendgroup":"LAC","marker":{"color":"#00cc96","size":[1.0917261454251066,1.0,1.1768785484728976,1.1125665266690778,1.1805174155510136,4.4959900875857155,2.2488097095329835,1.9041214788926406,1.3226502983171868,1.1372820386635294,1.2988976264242598,1.4753441587688039,1.1721640874269146,1.5229350983790824,2.3861067669889255,1.4706720721728408,1.2714381358867957,6.928151624386924],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"LAC","orientation":"v","showlegend":true,"x":[42.36935952727184,42.584380636496974,40.83934341849112,58.90770975320879,57.35928516001907,50.63166740487189,46.76173910594,44.02398865397727,42.03572274787535,45.30154407865812,50.45786580056841,50.491965117192514,53.951897986531314,57.24910064009685,53.592465317982494,59.598774035194914,57.35672728619727,60.48727251794812],"xaxis":"x","y":[39.68723978027348,51.23330781386317,45.95510185938908,49.21247336244875,46.15629418573037,46.70695530062811,41.3424983747329,42.38764789835111,42.57950487106838,47.96854727902833,43.68666211283077,45.4402995804359,38.61057120065728,44.44102835148968,50.41870410395841,48.27858949121326,48.93778449405987,53.87094736890694],"yaxis":"y","type":"scatter"},{"customdata":[[1987,2018,"MENA",3.3327518675166123,"PIP: Gini"],[1990,2015,"MENA",1.3318573262205067,"PIP: Gini"],[1990,2017,"MENA",3.923664109433539,"PIP: Gini"],[1990,2013,"MENA",2.0092408865286577,"PIP: Gini"],[1990,2018,"MENA",3.4120312169609064,"PIP: Gini"],[1992,2018,"MENA",1.2337114092711228,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Turkey","Tunisia","Egypt","Morocco","Iran","Israel"],"legendgroup":"MENA","marker":{"color":"#ab63fa","size":[3.3327518675166123,1.3318573262205067,3.923664109433539,2.0092408865286577,3.4120312169609064,1.2337114092711228],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"MENA","orientation":"v","showlegend":true,"x":[43.47708473371519,40.23511683407151,32.00394103414895,39.20690340668367,43.60477757130536,35.50725442974516],"xaxis":"x","y":[41.8775203427554,32.81588249697604,31.533952769400443,39.54850870115624,42.00330198476104,38.57717384665088],"yaxis":"y","type":"scatter"},{"customdata":[[1991,2016,"S & SE Asia",5.615908915868427,"PIP: Gini"],[1992,2018,"S & SE Asia",1.1955580586123422,"PIP: Gini"],[1990,2018,"S & SE Asia",7.1981764128614545,"PIP: Gini"],[1991,2018,"S & SE Asia",4.059964280427714,"PIP: Gini"],[1987,2018,"S & SE Asia",39.643052783095655,"PIP: Gini"],[1992,2018,"S & SE Asia",3.674486534059679,"PIP: Gini"],[1990,2016,"S & SE Asia",1.604218948455777,"PIP: Gini"],[1990,2018,"S & SE Asia",3.002973740659188,"PIP: Gini"],[1989,2015,"S & SE Asia",1.909635634172949,"PIP: Gini"],[1990,2018,"S & SE Asia",8.534492100074964,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Bangladesh","Laos","Pakistan","Philippines","India","Vietnam","Sri Lanka","Thailand","Malaysia","Indonesia"],"legendgroup":"S & SE Asia","marker":{"color":"#FFA15A","size":[5.615908915868427,1.1955580586123422,7.1981764128614545,4.059964280427714,39.643052783095655,3.674486534059679,1.604218948455777,3.002973740659188,1.909635634172949,8.534492100074964],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"S & SE Asia","orientation":"v","showlegend":true,"x":[27.5708056020332,34.30977523930045,33.24866089481644,43.82355142336644,32.574164294385334,35.65455877333817,32.447432896591,45.2656486304157,46.16850362718148,32.2712573925182],"xaxis":"x","y":[32.38527251961526,38.80243378589684,29.58926559759773,37.81170617851155,34.58968626484365,35.71554605834283,39.34577335702164,36.41217335828974,41.06639837531249,38.41037729176489],"yaxis":"y","type":"scatter"},{"customdata":[[1991,2015,"SS Africa",1.4984998054325325,"PIP: Gini"],[1992,2015,"SS Africa",2.4052001690749023,"PIP: Gini"],[1986,2017,"SS Africa",1.0570300812564803,"PIP: Gini"],[1991,2018,"SS Africa",1.4346702764503614,"PIP: Gini"],[1987,2014,"SS Africa",1.115543719956672,"PIP: Gini"],[1991,2018,"SS Africa",2.6349183581055824,"PIP: Gini"],[1992,2018,"SS Africa",1.6323466623323335,"PIP: Gini"],[1992,2018,"SS Africa",6.595621557897276,"PIP: Gini"],[1993,2014,"SS Africa",2.613722325081895,"PIP: Gini"],[1994,2018,"SS Africa",1.5577395124072537,"PIP: Gini"],[1989,2019,"SS Africa",2.1669913937082663,"PIP: Gini"],[1995,2015,"SS Africa",4.1322523255424946,"PIP: Gini"],[1991,2018,"SS Africa",1.349412120777803,"PIP: Gini"],[1991,2016,"SS Africa",1.8664813926414663,"PIP: Gini"],[1994,2016,"SS Africa",1.027737789890095,"PIP: Gini"],[1988,2018,"SS Africa",1.7146939671273893,"PIP: Gini"],[1992,2013,"SS Africa",1.3194480772207247,"PIP: Gini"],[1994,2018,"SS Africa",1.5706812509981622,"PIP: Gini"],[1993,2015,"SS Africa",1.0641832328358038,"PIP: Gini"],[1993,2018,"SS Africa",1.0493209238189638,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Zambia","Kenya","Lesotho","Senegal","Mauritania","Tanzania","Niger","Nigeria","South Africa","Mali","Uganda","Ethiopia","Guinea","Ghana","Eswatini","Cote d'Ivoire","Burundi","Burkina Faso","Botswana","Guinea-Bissau"],"legendgroup":"SS Africa","marker":{"color":"#19d3f3","size":[1.4984998054325325,2.4052001690749023,1.0570300812564803,1.4346702764503614,1.115543719956672,2.6349183581055824,1.6323466623323335,6.595621557897276,2.613722325081895,1.5577395124072537,2.1669913937082663,4.1322523255424946,1.349412120777803,1.8664813926414663,1.027737789890095,1.7146939671273893,1.3194480772207247,1.5706812509981622,1.0641832328358038,1.0493209238189638],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"SS Africa","orientation":"v","showlegend":true,"x":[60.50619139217872,57.46096225002908,56.016059070253775,54.13735851445636,43.93901470328717,35.29222222530266,36.09754302825158,44.98405367710789,59.33393638480528,50.4412366929203,44.36271750863471,44.56451319731351,46.84304836688162,38.43723080807567,60.454725802412746,36.886285924910375,33.33381193765381,48.07249341528258,60.79065038065183,43.61022630012482],"xaxis":"x","y":[57.13605842336405,40.77577253361156,44.87970137435177,38.122472437144175,32.619349882270136,40.4912299517734,37.2810448544046,35.12774279386329,63.02607272842364,36.13692014891342,42.70545381163759,34.99312323123417,29.591953001009703,43.52087898470239,54.57979366950237,37.183563557452445,38.62481871355873,47.34712783901176,53.32502673276544,34.76523039627381],"yaxis":"y","type":"scatter"},{"customdata":[[1989,2018,"W. Europe",2.685366481818221,"PIP: Gini"],[1991,2018,"W. Europe",1.0121399835072487,"PIP: Gini"],[1987,2018,"W. Europe",1.2445529165434093,"PIP: Gini"],[1995,2018,"W. Europe",1.2951639038151195,"PIP: Gini"],[1990,2018,"W. Europe",1.4829769236268702,"PIP: Gini"],[1991,2018,"W. Europe",3.33521901470926,"PIP: Gini"],[1991,2018,"W. Europe",1.1449490474975281,"PIP: Gini"],[1989,2018,"W. Europe",2.8095927858687357,"PIP: Gini"],[1990,2018,"W. Europe",2.3159553427104718,"PIP: Gini"],[1992,2018,"W. Europe",1.157776225450074,"PIP: Gini"],[1988,2018,"W. Europe",1.3181811348036656,"PIP: Gini"],[1992,2018,"W. Europe",1.2818678967543222,"PIP: Gini"],[1991,2017,"W. Europe",2.8704353819328947,"PIP: Gini"],[1987,2018,"W. Europe",1.1314599416771451,"PIP: Gini"],[1991,2018,"W. Europe",1.1506839677339709,"PIP: Gini"],[1992,2018,"W. Europe",1.2353472154882912,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["Italy","Luxembourg","Austria","Greece","Netherlands","Germany","Norway","France","Spain","Denmark","Belgium","Sweden","United Kingdom","Ireland","Finland","Switzerland"],"legendgroup":"W. Europe","marker":{"color":"#FF6692","size":[2.685366481818221,1.0121399835072487,1.2445529165434093,1.2951639038151195,1.4829769236268702,3.33521901470926,1.1449490474975281,2.8095927858687357,2.3159553427104718,1.157776225450074,1.3181811348036656,1.2818678967543222,2.8704353819328947,1.1314599416771451,1.1506839677339709,1.2353472154882912],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Europe","orientation":"v","showlegend":true,"x":[32.57331576650687,26.78939723763907,23.04449326095372,36.97557243767344,31.090072990537287,29.439847530854003,25.227584653851657,32.17124956260336,32.023740968810586,24.69381040965999,25.71468298703951,24.90873346361343,35.92740026813792,35.46620274587625,22.87976170944787,33.85640810532497],"xaxis":"x","y":[35.22257062873518,35.36809440930619,30.84879012966293,32.89120526515416,28.12108040445857,31.69841088561242,27.56086233181646,32.38068846338816,34.71894730060089,28.166336194439168,27.214413739767977,29.97418872901206,35.148830704729576,30.60292684647587,27.32977282956268,33.14105099791199],"yaxis":"y","type":"scatter"},{"customdata":[[1991,2018,"W. Offshoots",10.371560976199092,"PIP: Gini"],[1991,2017,"W. Offshoots",2.040513400028431,"PIP: Gini"],[1989,2018,"W. Offshoots",1.7001618174663031,"PIP: Gini"]],"hovertemplate":"<b>%{hovertext}</b><br><br>value1990=%{x:.2f}<br>value2018=%{y:.2f}<br>Year1990=%{customdata[0]}<br>Year2018=%{customdata[1]}<extra></extra>","hovertext":["United States","Canada","Australia"],"legendgroup":"W. Offshoots","marker":{"color":"#B6E880","size":[10.371560976199092,2.040513400028431,1.7001618174663031],"sizemode":"area","sizeref":0.1025,"symbol":"circle"},"mode":"markers","name":"W. Offshoots","orientation":"v","showlegend":true,"x":[38.0459151442457,31.0210856918952,33.15383472483562],"xaxis":"x","y":[41.407843639922994,33.30820627166964,34.33376217623682],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"value1990"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"value2018"}},"legend":{"title":{"text":"region"},"tracegroupgap":0,"itemsizing":"constant"},"title":{"text":"PIP: Gini, 1990 vs 2018 (+/- 5)"},"height":600,"shapes":[{"line":{"color":"#808080"},"opacity":0.5,"type":"line","x0":20.18657811939966,"x1":63.02607272842364,"xref":"x","y0":20.18657811939966,"y1":63.02607272842364,"yref":"y"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b8c6e010-79c5-4abc-adbd-fbe5d254fd63');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
</section>
<section id="section-50" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-50"></h2>
<section id="different-worlds-a-comparison" class="level3">
<h3 class="anchored" data-anchor-id="different-worlds-a-comparison">Different worlds: a comparison</h3>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>df_summary</span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table1.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70078]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x11337b220). One of the two will be used. Which one is undefined.
[0307/105605.938390:INFO:headless_shell.cc(107)] 105488 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpnhv_84zr/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table1.png" class="img-fluid"></p>
</section>
</section>
</section>
<section id="aligning-inequality-indices" class="level1">
<h1>Aligning inequality indices</h1>
<p>, not so sensitive to top [Osberg…]</p>
<section id="section-51" class="level2">
<h2 class="anchored" data-anchor-id="section-51"></h2>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1990</span>, <span class="dv">2015</span>]</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Gini'</span>,</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1990 vs 2015 (+/- 3 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table2.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70094]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x1170c5220). One of the two will be used. Which one is undefined.
[0307/105606.796054:INFO:headless_shell.cc(107)] 102382 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpxj7gkpfr/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table2.png" class="img-fluid"></p>
</section>
<section id="section-52" class="level2">
<h2 class="anchored" data-anchor-id="section-52"></h2>
<p>Observations - All very similar - MENA is interesting.</p>
</section>
<section id="section-53" class="level2">
<h2 class="anchored" data-anchor-id="section-53"></h2>
<p>Find countries where the measures moved in different directions… Plot them (the whole time series.)</p>
</section>
<section id="section-54" class="level2">
<h2 class="anchored" data-anchor-id="section-54"></h2>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1990</span>, <span class="dv">2015</span>]</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Gini – pretax'</span>,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 1pc share – pretax'</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1990 vs 2015 (+/- 3 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table3.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70104]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x116a25220). One of the two will be used. Which one is undefined.
[0307/105607.667282:INFO:headless_shell.cc(107)] 102097 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpa6oyz7zi/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table3.png" class="img-fluid"></p>
</section>
<section id="section-55" class="level2">
<h2 class="anchored" data-anchor-id="section-55"></h2>
<p>Observations - All very similar - LAC – reverses trend among small number of countries</p>
</section>
<section id="section-56" class="level2">
<h2 class="anchored" data-anchor-id="section-56"></h2>
<p>Find countries where the measures moved in different directions… Plot them (the whole time series.)</p>
</section>
<section id="section-57" class="level2">
<h2 class="anchored" data-anchor-id="section-57"></h2>
<p>General relationship – regression</p>
</section>
<section id="section-58" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="section-58"></h2>
<section id="section-59" class="level3">
<h3 class="anchored" data-anchor-id="section-59"></h3>
<p>Take home message isn’t all that dependent on the measure - Concern that Gini misses what’s happening at the extremes. - In individual cases there can be important differences - But looking globally it’s less of an issue.</p>
</section>
</section>
<section id="alternative-spec----5-years" class="level2">
<h2 class="anchored" data-anchor-id="alternative-spec----5-years">Alternative spec - +/-5 years</h2>
</section>
<section id="section-60" class="level2">
<h2 class="anchored" data-anchor-id="section-60"></h2>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>reference_vals <span class="op">=</span> [<span class="dv">1995</span>, <span class="dv">2018</span>]</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>max_dist_from_refs <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">False</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>selected_vars <span class="op">=</span> [</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'WID: Top 10pc share – pretax'</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'PIP: Top 10pc share'</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2018 (+/- 5 years) – All available countries</code></pre>
</div>
</div>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table6.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70114]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x1156b9220). One of the two will be used. Which one is undefined.
[0307/105608.527163:INFO:headless_shell.cc(107)] 108370 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmp6dl1ykyc/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table6.png" class="img-fluid"></p>
</section>
<section id="section-61" class="level2">
<h2 class="anchored" data-anchor-id="section-61"></h2>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>all_metrics_requirement <span class="op">=</span> <span class="va">True</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(make_selection_msg(reference_vals,max_dist_from_refs,all_metrics_requirement, selected_vars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1995 vs 2018 (+/- 5 years) – Matched countries only</code></pre>
</div>
</div>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> change_summary_table(</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>      source_dfs <span class="op">=</span> source_dfs,</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>      df_pop <span class="op">=</span> df_pop,</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>      df_pop_regions <span class="op">=</span> df_pop_regions,</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>      df_regions <span class="op">=</span> df_regions,</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>      selected_vars <span class="op">=</span> selected_vars,</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>      reference_vals <span class="op">=</span> reference_vals,</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>      max_dist_from_refs <span class="op">=</span> max_dist_from_refs,</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>      min_dist_between <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>      all_metrics_requirement <span class="op">=</span> all_metrics_requirement,</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>      reference_col <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>      group_by_col <span class="op">=</span> <span class="st">"Entity"</span>,</span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>      outlier_cut_off_upper <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>      tolerance_lookup <span class="op">=</span>  tolerance_lookup,</span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>      region_col <span class="op">=</span> <span class="st">'region'</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>df_summary <span class="op">=</span> df_summary.drop([<span class="st">"Other N. America"</span>, <span class="st">"Other Oceania"</span>], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>dfi.export(df_summary,<span class="st">"images/tables/pres_table7.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>objc[70124]: Class WebSwapCGLLayer is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/Frameworks/libANGLE-shared.dylib (0x7ffa5b438550) and /Applications/Google Chrome.app/Contents/Frameworks/Google Chrome Framework.framework/Versions/110.0.5481.177/Libraries/libGLESv2.dylib (0x112a25220). One of the two will be used. Which one is undefined.
[0307/105609.357533:INFO:headless_shell.cc(107)] 107871 bytes written to file /var/folders/rz/2g82f4z111vbcp20h8dy8snh0000gn/T/tmpgatighvw/temp.png</code></pre>
</div>
</div>
<p><img src="images/tables/pres_table7.png" class="img-fluid"></p>
</section>
<section id="bibliography" class="level2">




</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">Bibliography</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-Alvaredo2018-qq" class="csl-entry" role="doc-biblioentry">
Alvaredo, F, L Chancel, T Piketty, E Saez, and G Zucman. 2018. <em>World Inequality Report 2018</em>. Harvard University Press.
</div>
<div id="ref-AnandSegal2015-nh" class="csl-entry" role="doc-biblioentry">
Anand, Sudhir, and Paul Segal. 2015. <span>“The Global Distribution of Income.”</span> In <em>Handbook of Income Distribution</em>, 2:937–79. Elsevier.
</div>
<div id="ref-Atkinson2016-xp" class="csl-entry" role="doc-biblioentry">
Atkinson, A. 2016. <span>“Monitoring Global Poverty. Report of the Commission on Global Poverty. Washington, <span>DC</span>: World Bank Group.”</span>
</div>
<div id="ref-Atkinson-Micklewright1992-qr" class="csl-entry" role="doc-biblioentry">
Atkinson, Anthony Barnes, John Micklewright, and M Micklewright. 1992. <em>Economic Transformation in Eastern Europe and the Distribution of Income</em>. Cambridge University Press.
</div>
<div id="ref-AtkinsonBrandolini2001-qt" class="csl-entry" role="doc-biblioentry">
Atkinson, Anthony B, and Andrea Brandolini. 2001. <span>“Promise and Pitfalls in the Use of <span>‘Secondary’</span> <span>Data-Sets</span>: Income Inequality in <span>OECD</span> Countries as a Case Study.”</span> <em>J. Econ. Lit.</em> 39 (3): 771–99.
</div>
<div id="ref-CarranzaNolan2022-ko" class="csl-entry" role="doc-biblioentry">
Carranza, Rafael, Marc Morgan, and Brian Nolan. 2022. <span>“<span>TOP</span> <span>INCOME</span> <span>ADJUSTMENTS</span> <span>AND</span> <span>INEQUALITY</span>: <span>AN</span> <span>INVESTIGATION</span> <span>OF</span> <span>THE</span> <span>EU‐SILC</span> <span class="math inline">\(^{†}\)</span>.”</span> <em>Rev. Income Wealth</em>, June.
</div>
<div id="ref-chancel2021" class="csl-entry" role="doc-biblioentry">
Chancel, Lucas, Thomas Piketty, Emmanuel Saez, and Gabriel Zucman. 2021. <span>“World Inequality Report 2022.”</span>
</div>
<div id="ref-Deaton2005-oy" class="csl-entry" role="doc-biblioentry">
Deaton, Angus. 2005. <span>“Measuring Poverty in a Growing World (or Measuring Growth in a Poor World).”</span> <em>Rev. Econ. Stat.</em> 87 (1): 1–19.
</div>
<div id="ref-Kanbur2022-lk" class="csl-entry" role="doc-biblioentry">
Kanbur, Ravi, Eduardo Ortiz-Juarez, and Andy Sumner. 2022. <span>“The Global Inequality Boomerang.”</span>
</div>
<div id="ref-laknerMilanovic2016" class="csl-entry" role="doc-biblioentry">
Lakner, Christoph, and Branko Milanovic. 2016. <span>“Global Income Distribution: From the Fall of the Berlin Wall to the Great Recession.”</span> <em>World Bank Econ. Rev.</em> 30 (2): 203232.
</div>
<div id="ref-Milanovic1998-sy" class="csl-entry" role="doc-biblioentry">
Milanovic, Branko. 1998. <em>Income, Inequality, and Poverty During the Transition from Planned to Market Economy</em>. Washington, D.C.: The World Bank.
</div>
<div id="ref-Milanovic2007" class="csl-entry" role="doc-biblioentry">
———. 2007. <em>Worlds Apart: Measuring International and Global Inequality</em>. Princeton University Press.
</div>
<div id="ref-Nino-Zarazua2017-tv" class="csl-entry" role="doc-biblioentry">
Niño-Zarazúa, Miguel, Laurence Roope, and Finn Tarp. 2017. <span>“Global Inequality: Relatively Lower, Absolutely Higher.”</span> <em>Rev. Income Wealth</em> 63 (4): 661–84.
</div>
<div id="ref-Novokmet2018-px" class="csl-entry" role="doc-biblioentry">
Novokmet, Filip, Thomas Piketty, and Gabriel Zucman. 2018. <span>“From Soviets to Oligarchs: Inequality and Property in Russia 1905-2016.”</span> <em>J. Econ. Inequality</em> 16 (2): 189–223.
</div>
<div id="ref-WBpoverty2016" class="csl-entry" role="doc-biblioentry">
<em>Poverty and Shared Prosperity 2016: Taking on Inequality</em>. 2016. Poverty and Shared Prosperity. The World Bank. <a href="https://doi.org/10.1596/978-1-4648-0958-3">https://doi.org/10.1596/978-1-4648-0958-3</a>.
</div>
<div id="ref-Ravallion2014-mk" class="csl-entry" role="doc-biblioentry">
Ravallion, Martin. 2014. <span>“Income Inequality in the Developing World.”</span> <em>Science</em> 344 (6186): 851–55.
</div>
<div id="ref-Sandefur2022-lx" class="csl-entry" role="doc-biblioentry">
Sandefur, Justin. 2022. <span>“The Great Indian Poverty Debate, 2.0.”</span> <a href="https://www.cgdev.org/blog/great-indian-poverty-debate-20" class="uri">https://www.cgdev.org/blog/great-indian-poverty-debate-20</a>.
</div>
<div id="ref-World_Bank2018-eo" class="csl-entry" role="doc-biblioentry">
World Bank. 2018. <span>“Poverty and Shared Prosperity 2018: Piecing Together the Poverty Puzzle.”</span>
</div>
<div id="ref-World_Bank2022-vr" class="csl-entry" role="doc-biblioentry">
———. 2022. <em>Poverty and Shared Prosperity 2022: Correcting Course</em>. Poverty and Shared Prosperity. Washington, D.C., DC: World Bank Publications.
</div>
<div id="ref-MorelliYonzan2022-zn" class="csl-entry" role="doc-biblioentry">
Yonzan, Nishant, Branko Milanovic, Salvatore Morelli, and Janet Gornick. 2022. <span>“Drawing a Line: Comparing the Estimation of Top Incomes Between Tax Data and Household Survey Data.”</span> <em>J. Econ. Inequality</em> 20 (1): 67–95.
</div>
<div id="ref-Van_Zanden2014-zo" class="csl-entry" role="doc-biblioentry">
Zanden, Jan Luiten van, Joerg Baten, Peter Foldvari, and Bas van Leeuwen. 2014. <span>“The Changing Shape of Global Inequality 1820–2000; Exploring a New Dataset.”</span> <em>Rev. Income Wealth</em> 60 (2): 279–97.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>